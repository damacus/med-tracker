{"id":"med-tracker-00e","title":"[MLKP-009] Cache lookup results","description":"Cache lookup results. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:24Z","updated_at":"2026-01-19T16:33:24Z","labels":["medicine-lookup"]}
{"id":"med-tracker-04cd","title":"Migrate docs from MkDocs to Zensical and consolidate user docs","description":"Track migration to Zensical docs tooling, docs cleanup into /docs, screenshot consolidation, onboarding story, mermaid fixes, and GitHub Pages workflow split.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-10T11:32:29Z","created_by":"Dan Webb","updated_at":"2026-02-10T11:32:51Z","closed_at":"2026-02-10T11:32:51Z","close_reason":"Completed in docs migration changeset","labels":["docs","documentation","zensical"]}
{"id":"med-tracker-06z","title":"[OIDC-SEC-009] OIDC client secret stored securely","description":"OIDC client secret stored securely. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:11Z","updated_at":"2026-02-17T23:04:26Z","closed_at":"2026-02-17T23:04:26Z","close_reason":"Fixed in PR #475","labels":["oidc","security"]}
{"id":"med-tracker-089","title":"Invitations Features","description":"Inviting users, accepting invitations. Feature file: features/invitations.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:34Z","updated_at":"2026-01-19T16:29:34Z"}
{"id":"med-tracker-09j","title":"[OIDC-SEC-001] OIDC token signature verification prevents token tampering","description":"OIDC token signature verification prevents token tampering. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:33:52Z","updated_at":"2026-02-17T23:13:30Z","closed_at":"2026-02-17T23:13:30Z","close_reason":"Completed - OIDC token signature verification implemented via discovery: true for automatic JWKS fetching. Tests added and passing.","labels":["oidc","security"]}
{"id":"med-tracker-0a9","title":"[I18N-004] Date formats respect locale","description":"Date formats respect locale. Feature file: features/i18n.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:34Z","updated_at":"2026-01-19T16:30:34Z","labels":["i18n"]}
{"id":"med-tracker-0ay","title":"[MLKP-019] Audit log external lookups","description":"Audit log external lookups. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:47Z","updated_at":"2026-01-19T16:33:47Z","labels":["medicine-lookup"]}
{"id":"med-tracker-0b2","title":"[MLKP-010] View PIL (Patient Information Leaflet) link","description":"View PIL (Patient Information Leaflet) link. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:26Z","updated_at":"2026-01-19T16:33:26Z","labels":["medicine-lookup"]}
{"id":"med-tracker-0gy","title":"[PASSKEY-SEC-010] Passkey removal requires current authentication","description":"Passkey removal requires current authentication. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:41Z","updated_at":"2026-01-26T21:35:48Z","closed_at":"2026-01-26T21:35:48Z","close_reason":"Verified with tests: remove_credential only works for current account's credentials","labels":["passkey","security"]}
{"id":"med-tracker-0k1","title":"[PERF-002] Admin user list loads in under 500ms with 100+ users","description":"Admin user list loads in under 500ms with 100+ users. Feature file: features/performance.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:38Z","updated_at":"2026-01-19T16:31:38Z","labels":["performance"]}
{"id":"med-tracker-0n8","title":"[PEOPLE-017] Person type transitions and age calculations","description":"Person type transitions and age calculations. Feature file: features/people.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:08Z","updated_at":"2026-01-19T16:31:08Z","labels":["people"]}
{"id":"med-tracker-0nh5","title":"Extract medication_takes queries out of card view components","description":"Prescriptions::Card#render_todays_takes and PersonMedicines::Card#render_takes_section both query medication_takes.where(...) directly inside component render methods. When rendering multiple cards (e.g. on People#show), this causes N+1 queries. The data should be pre-loaded in the controller and passed to the component.","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","owner":"dan.webb@damacus.io","created_at":"2026-02-11T13:38:33Z","created_by":"Dan Webb","updated_at":"2026-02-18T10:24:08Z","closed_at":"2026-02-18T10:24:08Z","close_reason":"Implemented: pre-load today's medication takes in PeopleController#show and PrescriptionsController#update to eliminate N+1 queries. Cards accept optional todays_takes: param with fallback. PR #482.","labels":["components","n-plus-one","performance"]}
{"id":"med-tracker-0p7","title":"Prescriptions Features","description":"Prescription CRUD, dosage selection, status. Feature file: features/prescriptions.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:50Z","updated_at":"2026-01-19T16:29:50Z"}
{"id":"med-tracker-0rb","title":"[STYLE-011] Loading states shown appropriately","description":"Loading states shown appropriately. Feature file: features/ui.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:14Z","updated_at":"2026-01-19T16:32:14Z","labels":["ui"]}
{"id":"med-tracker-11z","title":"Authorization Features","description":"Role-based access control, permissions. Feature file: features/authorization.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:19Z","updated_at":"2026-01-19T16:29:19Z"}
{"id":"med-tracker-12tv","title":"Refactor IndexView God Component","description":"The app/components/dashboard/index_view.rb component is taking on too many responsibilities (6 data dependencies). Consider extracting data preparation into a DashboardPresenter or DashboardViewModel to improve maintainability and adherence to the Single Responsibility Principle.","notes":"## Plan\n\n1. Create DashboardPresenter to extract data preparation logic from IndexView\n2. Move the 6 data dependencies into the presenter\n3. Update controller to use the presenter\n4. Update IndexView to receive presenter instead of raw data\n5. Add tests for the presenter\n\n## Worktree\nCreated worktree at `.worktrees/refactor-index-view` on branch `refactor/index-view-god-component`","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-16T21:18:53Z","created_by":"Dan Webb","updated_at":"2026-02-17T09:05:45Z","closed_at":"2026-02-17T09:05:45Z","close_reason":"Completed. Extracted DashboardPresenter from IndexView god component. Rebased onto main, integrated FamilyDashboard::ScheduleQuery, fixed specs, all 921 tests pass."}
{"id":"med-tracker-13r","title":"[PASSKEY-008] Passkey cross-device registration: User can register passkey from another device","description":"Passkey cross-device registration: User can register passkey from another device. Feature file: features/authentication.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:32:56Z","updated_at":"2026-01-19T16:32:56Z","labels":["authentication","passkey"]}
{"id":"med-tracker-1hl7","title":"Signup verification email: custom template and tests","description":"Rodauth verify_account is already enabled but has placeholder from address, no custom templates, and no tests. Fix from address, add text template, write mailer + feature specs. TDD-first. Part of issue #510.","status":"closed","priority":2,"issue_type":"feature","owner":"dan.webb@damacus.io","created_at":"2026-02-23T10:36:41Z","created_by":"Dan Webb","updated_at":"2026-02-23T14:13:08Z","closed_at":"2026-02-23T14:13:08Z","close_reason":"RodauthMailer created with verify_account action, custom email template, i18n subject, email_from configured via credentials/env. 10 specs passing (5 mailer unit tests + 5 system tests)."}
{"id":"med-tracker-1jg","title":"[OIDC-SEC-004] OIDC issuer validation prevents phishing attacks","description":"OIDC issuer validation prevents phishing attacks. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:33:58Z","updated_at":"2026-02-17T23:13:30Z","closed_at":"2026-02-17T23:13:30Z","close_reason":"Completed - OIDC issuer validation implemented with issuer configuration in provider options. Tests passing.","labels":["oidc","security"]}
{"id":"med-tracker-1p0e","title":"Redundant button classes in QuickActions component","description":"QuickActions component (dashboard/quick_actions.rb:36-44) defines button_classes method that duplicates RubyUI::Button styling. This is dead code - the component uses Link component (line 19), not these classes.\n\nLocation: app/components/dashboard/quick_actions.rb:36-44\n\nViolates signal-to-noise - unused code adds confusion.","acceptance_criteria":"- Remove unused button_classes method\n- Component still renders correctly\n- Code is cleaner and less confusing\n- Tests pass","status":"closed","priority":3,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:05:07Z","updated_at":"2026-02-06T23:43:11Z","closed_at":"2026-02-06T23:43:11Z","close_reason":"Removed unused button_classes method from QuickActions. Added component spec.","labels":["cleanup","quick-fix","ui"]}
{"id":"med-tracker-23mn","title":"Mobile UI/UX improvements for buttons and layout","description":"Fix mobile design issues identified in screenshots:\n1. Dashboard: Full-width buttons look non-standard on mobile\n2. Prescription card: Take Now button too wide, inconsistent with Delete button styling\n3. Stock page: Last card hidden behind bottom navigation on mobile - needs padding","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T22:46:45Z","updated_at":"2026-01-22T23:04:47Z","closed_at":"2026-01-22T23:04:47Z","close_reason":"Completed - PR #392 created with mobile UI improvements","labels":["accessibility","mobile","ui"]}
{"id":"med-tracker-246","title":"[OIDC-004] OIDC provider metadata discovery: Verify OpenID configuration","description":"OIDC provider metadata discovery: Verify OpenID configuration. Feature file: features/authentication.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:27Z","updated_at":"2026-02-17T23:22:21Z","closed_at":"2026-02-17T23:22:21Z","close_reason":"Already implemented via OIDC security module configuration","labels":["authentication","oidc"]}
{"id":"med-tracker-24o","title":"[MLKP-015] View drug interactions from lookup","description":"View drug interactions from lookup. Feature file: features/medicine_lookup.json","notes":"Critical issue resolved: Fixed missing tailwind.css asset by running `bundle exec rails tailwindcss:build` and rebuilding test environment. All signup tests now passing (8/8). Ready to proceed with MLKP-015 implementation.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-19T16:33:36Z","updated_at":"2026-02-17T23:25:57Z","labels":["medicine-lookup"]}
{"id":"med-tracker-27v","title":"[PASSKEY-010] Passkey security: User verification required for sensitive operations","description":"Passkey security: User verification required for sensitive operations. Feature file: features/authentication.json","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-19T16:33:04Z","updated_at":"2026-01-19T16:33:04Z","labels":["authentication","passkey","security"]}
{"id":"med-tracker-2bl1","title":"UserRow uses space-x-2 instead of gap-2 for flex layout","description":"Admin::Users::UserRow (user_row.rb:25) uses space-x-2 for flex layout buttons. Modern best practice is gap-2 for flex/grid layouts as it's more predictable and handles wrapping better.\n\nLocation: app/components/admin/users/user_row.rb:25\n\nCurrent: class: 'text-right space-x-2'\nShould be: class: 'text-right flex gap-2 justify-end'","acceptance_criteria":"- UserRow uses gap-2 instead of space-x-2\n- Buttons render correctly with proper spacing\n- Layout handles edge cases better\n- Tests pass","status":"closed","priority":3,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:05:24Z","updated_at":"2026-02-06T23:36:50Z","closed_at":"2026-02-06T23:36:50Z","close_reason":"Replaced space-x-2 with flex gap-2 justify-end in UserRow. Added component spec.","labels":["best-practice","quick-fix","ui"]}
{"id":"med-tracker-2hd","title":"[PWA-003] App installable on mobile","description":"App installable on mobile. Feature file: features/pwa.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:31:04Z","updated_at":"2026-01-19T16:31:04Z","labels":["pwa"]}
{"id":"med-tracker-2kd","title":"[PASSKEY-SEC-007] Counter validation prevents cloned credentials","description":"Counter validation prevents cloned credentials. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:35Z","updated_at":"2026-01-26T21:35:46Z","closed_at":"2026-01-26T21:35:46Z","close_reason":"Verified with tests: sign count stored and checked for clone detection","labels":["passkey","security"]}
{"id":"med-tracker-2sb","title":"[UI-020] Implement dark mode support","description":"Implement dark mode support. Feature file: features/ui_improvements.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:35:24Z","updated_at":"2026-01-19T16:35:24Z","labels":["ui-improvements"]}
{"id":"med-tracker-2ud","title":"[E2E-012] Person type and capacity validation flow","description":"Person type and capacity validation flow. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:34Z","updated_at":"2026-01-19T16:31:34Z","labels":["e2e"]}
{"id":"med-tracker-30h","title":"[UI-024] Enhance PWA experience","description":"Enhance PWA experience. Feature file: features/ui_improvements.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:35:32Z","updated_at":"2026-01-19T16:35:32Z","labels":["pwa","ui-improvements"]}
{"id":"med-tracker-33d","title":"[UI-008] Return to previous page after form submission","description":"Return to previous page after form submission. Feature file: features/ui_improvements.json","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-01-19T16:34:53Z","updated_at":"2026-02-11T11:32:31Z","closed_at":"2026-02-11T11:32:31Z","close_reason":"All controllers now use redirect_back_or_to instead of hardcoded redirect_to after form submission. Tests verify both with-referrer and without-referrer cases.","labels":["ui-improvements"]}
{"id":"med-tracker-383","title":"[MLKP-005] Configure preferred data source","description":"Configure preferred data source. Feature file: features/medicine_lookup.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:33:14Z","updated_at":"2026-01-19T16:33:14Z","labels":["medicine-lookup"]}
{"id":"med-tracker-3ay","title":"[PASSKEY-SEC-009] Resident credentials protected from unauthorized access","description":"Resident credentials protected from unauthorized access. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:39Z","updated_at":"2026-01-26T21:35:47Z","closed_at":"2026-01-26T21:35:47Z","close_reason":"Verified with test: resident_key preferred for credential storage","labels":["passkey","security"]}
{"id":"med-tracker-3g1","title":"Profile Features","description":"View/edit profile, settings, preferences. Feature file: features/profile.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:52Z","updated_at":"2026-01-19T16:29:52Z"}
{"id":"med-tracker-3j9m","title":"Mobile UI bugs and improvements","description":"Collection of mobile UI issues discovered during manual testing. Covers navigation duplication, authorization button states, dialog bugs, broken back navigation, and missing parent role permissions.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-09T23:13:21Z","updated_at":"2026-02-09T23:56:42Z","closed_at":"2026-02-09T23:56:42Z","close_reason":"All 7 child issues completed and pushed to mobile-ui-bugs branch","labels":["bugs","mobile","ui"]}
{"id":"med-tracker-3l5","title":"[PASSKEY-SEC-001] WebAuthn attestation verification prevents cloned authenticators","description":"WebAuthn attestation verification prevents cloned authenticators. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:20Z","updated_at":"2026-01-26T21:35:36Z","closed_at":"2026-01-26T21:35:36Z","close_reason":"Verified with test: requests direct attestation during registration","labels":["passkey","security"]}
{"id":"med-tracker-3ox","title":"[PASSKEY-SEC-012] Passkey authentication is phishing-resistant","description":"Passkey authentication is phishing-resistant. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:45Z","updated_at":"2026-01-26T21:35:54Z","closed_at":"2026-01-26T21:35:54Z","close_reason":"Verified with tests: origin binding and user info in credential binding for phishing resistance","labels":["passkey","security"]}
{"id":"med-tracker-3u5","title":"[PASSKEY-005] Passkey management: User can add additional passkeys from settings","description":"Passkey management: User can add additional passkeys from settings. Feature file: features/authentication.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:50Z","updated_at":"2026-01-19T16:32:50Z","labels":["authentication","passkey"]}
{"id":"med-tracker-3z0","title":"[E2E-009] Carer relationship management and access control verification","description":"Carer relationship management and access control verification. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:28Z","updated_at":"2026-01-19T16:31:28Z","labels":["e2e"]}
{"id":"med-tracker-487","title":"[MLKP-016] Check interactions against patient's current medicines","description":"Check interactions against patient's current medicines. Feature file: features/medicine_lookup.json","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-19T16:33:39Z","updated_at":"2026-01-19T16:33:39Z","labels":["medicine-lookup"]}
{"id":"med-tracker-48n7","title":"Remove redundant Pundit::Authorization includes from controllers","description":"ApplicationController already includes Pundit::Authorization, but DashboardController, MedicinesController, PrescriptionsController, and MedicationTakesController all include it again. These redundant includes should be removed.","status":"closed","priority":3,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-11T13:38:23Z","created_by":"Dan Webb","updated_at":"2026-02-19T23:40:43Z","closed_at":"2026-02-19T23:40:43Z","close_reason":"Removed redundant Pundit::Authorization includes from controllers as it is already included in ApplicationController.","labels":["cleanup","controllers"]}
{"id":"med-tracker-48o","title":"[SEC-011] Admin user impersonation with full audit trail","description":"Admin user impersonation with full audit trail. Feature file: features/security.json","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-19T16:32:16Z","updated_at":"2026-01-19T16:32:16Z","labels":["security"]}
{"id":"med-tracker-4l3q","title":"Align dashboard active prescriptions query with Prescription.active scope","description":"DashboardPresenter#active_prescriptions currently uses `where(active: true)` while the domain scope `Prescription.active` is date-window based (`start_date \u003c= today \u003c= end_date`). This can cause dashboard stats and schedule/timeline behavior to disagree for prescriptions that are boolean-active but date-inactive (or vice versa).","acceptance_criteria":"- DashboardPresenter uses `Prescription.active` (date-based) for active prescription retrieval\n- Dashboard stats and schedule/timeline use consistent active-prescription semantics\n- Add/adjust presenter specs to cover date-inactive prescriptions not being counted as active\n- Existing dashboard specs remain green","status":"closed","priority":2,"issue_type":"bug","owner":"dan.webb@damacus.io","created_at":"2026-02-17T09:14:56Z","created_by":"Dan Webb","updated_at":"2026-02-18T10:36:40Z","closed_at":"2026-02-18T10:36:40Z","close_reason":"Closed"}
{"id":"med-tracker-4l9","title":"[PASSKEY-001] WebAuthn/Passkey configuration: Verify Rodauth WebAuthn support can be enabled","description":"WebAuthn/Passkey configuration: Verify Rodauth WebAuthn support can be enabled. Feature file: features/authentication.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:41Z","updated_at":"2026-01-26T16:26:39Z","closed_at":"2026-01-26T16:26:39Z","close_reason":"Closed","labels":["authentication","passkey"]}
{"id":"med-tracker-4qi","title":"[A11Y-006] Skip to main content link exists","description":"Focus on page load; Verify skip link appears; Click skip link; Verify focus moves to main content. Feature file: features/accessibility.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:13Z","updated_at":"2026-01-19T16:30:13Z","labels":["accessibility"]}
{"id":"med-tracker-4u5","title":"[PERF-007] Lighthouse performance score \u003e= 80%","description":"Lighthouse performance score \u003e= 80%. Feature file: features/performance.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:51Z","updated_at":"2026-01-19T16:31:51Z","labels":["performance"]}
{"id":"med-tracker-4vl","title":"[MLKP-012] Search by barcode/GTIN","description":"Search by barcode/GTIN. Feature file: features/medicine_lookup.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:33:31Z","updated_at":"2026-01-19T16:33:31Z","labels":["medicine-lookup"]}
{"id":"med-tracker-4w6b","title":"Seed initial users via invitations (k8s-compatible)","description":"Allow an initial set of users to be bootstrapped in production (e.g. from a k8s Job or `rails db:seed`) by sending invitation emails — no passwords stored in files.\n\n**Approach:**\n- Create `db/seeds/users.yml` listing users to invite (email + role only, no passwords). Uses non-`@example.com` placeholder emails with a comment to replace before running. Emails must not clash with existing `spec/fixtures/` which all use `@example.com`.\n- Create `db/seeds/seed_users.rb` with idempotent logic:\n  1. Reads `db/seeds/users.yml`\n  2. Skips if an `Account` already exists for that email OR a pending invitation exists\n  3. Creates `Invitation` and calls `InvitationMailer.with(invitation:).invite.deliver_later`\n- Update `db/seeds.rb` to call user seeding in production\n- Add `task dev:seed-users` and `task prod:seed-users` Taskfile tasks\n- Requires `APP_URL` env var (already used by `InvitationMailer`)\n- Invitation expiry: 7 days (default)\n\n**k8s pattern:** Run as a one-off `rails db:seed` in an init container or Job. No interactive prompts, exits 0 on success.","acceptance_criteria":"- Running `rails db:seed` in production sends invitation emails to listed users\n- Re-running is idempotent (skips existing accounts and pending invitations)\n- No passwords in any seed files\n- Does not clash with `spec/fixtures/` emails (all `@example.com`)\n- `task dev:seed-users` works (delivers to letter_opener/mailcatcher in dev)\n- Works as a k8s init container command","status":"closed","priority":2,"issue_type":"chore","owner":"dan.webb@damacus.io","created_at":"2026-02-18T11:19:36Z","created_by":"Dan Webb","updated_at":"2026-02-18T11:41:36Z","closed_at":"2026-02-18T11:41:36Z","close_reason":"Implemented: db/seeds/users.yml + seed_users.rb with idempotent invitation logic. Skips existing accounts and pending invitations. No passwords in files. Tasks task dev:seed-users and task prod:seed-users added. Production seeding wired into db/seeds.rb."}
{"id":"med-tracker-4y9","title":"[OTEL-008] Metrics for database connection pool","description":"Metrics for database connection pool. Feature file: features/observability.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:57Z","updated_at":"2026-01-19T16:31:57Z","labels":["observability"]}
{"id":"med-tracker-514","title":"[EPIC] Scan Medicines to Create","description":"Epic for the 'Scan medicines to create' feature. This allows users to scan barcodes/GTINs to identify and add medicines to their profile.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:39:37Z","updated_at":"2026-01-19T16:39:37Z","labels":["epic","feature","scanning"]}
{"id":"med-tracker-533","title":"Authentication Features","description":"Login, registration, password management, sessions. Feature file: features/authentication.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:17Z","updated_at":"2026-01-19T16:29:17Z"}
{"id":"med-tracker-5emo","title":"WCAG 2.5.8: Ensure all buttons meet 44x44px touch target size","description":"Audit and fix all interactive button elements to meet WCAG 2.5.8 Target Size (Minimum) Level AA requirements. Badge-style buttons currently lack explicit min-height/min-width constraints.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T12:11:24Z","updated_at":"2026-01-23T12:15:01Z","closed_at":"2026-01-23T12:15:01Z","close_reason":"Completed - WCAG 2.5.8 button sizing implemented with 44px touch targets","labels":["accessibility","ui","wcag"]}
{"id":"med-tracker-5enb","title":"Flash shows 'Error' for non-error messages like 'Please login to continue'","description":"The flash component shows \"Error\" as the AlertTitle for ALL alert-type messages, including informational redirects like \"Please login to continue\". Being redirected to login is not an error — it's a routine state. Using error-level styling (red, \"Error\" title) for routine redirects is the Boy Who Cried Wolf anti-pattern.","acceptance_criteria":"- \"Please login to continue\" does not display with \"Error\" title or destructive styling\n- Actual errors still show destructive styling\n- Tests pass","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-05T21:26:06Z","updated_at":"2026-02-05T22:58:53Z","closed_at":"2026-02-05T22:58:53Z","close_reason":"Fixed in PR #416. Login redirect now uses notice flash instead of error.","labels":["feedback","quick-fix","ui"]}
{"id":"med-tracker-5gj7","title":"[SCAN-002] Barcode Resolution Service","description":"Develop the backend service to resolve scanned barcodes (GTIN) into medicine details such as name, dosage, and description.","acceptance_criteria":"- API endpoint to resolve GTIN/barcode to medicine data\n- Integration with external medicine database (e.g., OpenFoodFacts or dedicated pharma API)\n- Mapping external data to internal `Medicine` model attributes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:39:44Z","updated_at":"2026-01-19T16:39:44Z","labels":["api-integration","backend"],"dependencies":[{"issue_id":"med-tracker-5gj7","depends_on_id":"med-tracker-514","type":"blocks","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-5n7","title":"[INVITE-005] Admin can cancel invitation","description":"Admin can cancel invitation. Feature file: features/invitations.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:45Z","updated_at":"2026-01-19T16:30:45Z","labels":["invitations"]}
{"id":"med-tracker-5ps","title":"[PASSKEY-006] Passkey management: User can remove passkeys","description":"Passkey management: User can remove passkeys. Feature file: features/authentication.json","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:52Z","updated_at":"2026-02-20T23:41:47Z","labels":["authentication","passkey"]}
{"id":"med-tracker-5pv8","title":"Implement live Compliance and Next Dose stat cards on dashboard","description":"The dashboard stat grid has four cards. Two are currently hardcoded placeholders:\n\n- **Compliance** — hardcoded `'94%'` (no real calculation)\n- **Next Dose** — hardcoded `'12:30'` (no real data)\n\nBoth need to be replaced with live values.\n\n### Compliance\nCalculate the percentage of scheduled doses that were actually taken today (or over a rolling window) for the current user's people. Formula: `(taken doses / scheduled doses) * 100`. Show `N/A` if no doses scheduled.\n\n### Next Dose\nFind the earliest upcoming `scheduled_at` time from `FamilyDashboard::ScheduleQuery` results where `status: :upcoming` and `taken_at: nil`. Display as a formatted time string (e.g. `12:30`). Show `—` if none today.\n\nBoth values should be computed in `DashboardPresenter` and passed through to `Components::Dashboard::IndexView`.","acceptance_criteria":"- Compliance card shows a real percentage based on today's taken vs scheduled doses\n- Next Dose card shows the real next upcoming dose time from the schedule query\n- Both show a sensible fallback (`N/A` / `—`) when no data is available\n- No hardcoded values remain in `index_view.rb`\n- Covered by presenter unit tests","notes":"Started work in worktree med-tracker-5pv8. Created progress.txt with plan of action. Triggering coding-agent.","status":"in_progress","priority":2,"issue_type":"feature","owner":"dan.webb@damacus.io","created_at":"2026-02-19T11:55:31Z","created_by":"Dan Webb","updated_at":"2026-02-19T16:38:41Z"}
{"id":"med-tracker-5so","title":"[UI-018] Implement bottom sheet for mobile forms","description":"Implement bottom sheet for mobile forms. Feature file: features/ui_improvements.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:35:17Z","updated_at":"2026-01-19T16:35:17Z","labels":["ui-improvements"]}
{"id":"med-tracker-5ub","title":"Dashboard Features","description":"Role-based views, data display, quick actions. Feature file: features/dashboard.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:25Z","updated_at":"2026-01-19T16:29:25Z"}
{"id":"med-tracker-5z2","title":"[MLKP-014] Filter search results by strength","description":"Filter search results by strength. Feature file: features/medicine_lookup.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:33:34Z","updated_at":"2026-01-19T16:33:34Z","labels":["medicine-lookup"]}
{"id":"med-tracker-68i","title":"[OIDC-002] OIDC ID token validation: Verify ID token signature and claims","description":"OIDC ID token validation: Verify ID token signature and claims. Feature file: features/authentication.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:23Z","updated_at":"2026-02-17T23:21:15Z","closed_at":"2026-02-17T23:21:15Z","close_reason":"Already implemented via Rodauth OmniAuth and OIDC security module","labels":["authentication","oidc"]}
{"id":"med-tracker-698","title":"[DOSE-013] Complete dose tracking workflow with restrictions","description":"Complete dose tracking workflow with restrictions. Feature file: features/dose_tracking.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:30Z","updated_at":"2026-01-19T16:30:30Z","labels":["dose-tracking"]}
{"id":"med-tracker-6ey","title":"[OIDC-SEC-010] OIDC redirect URI validation prevents open redirects","description":"OIDC redirect URI validation prevents open redirects. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:13Z","updated_at":"2026-02-17T23:15:31Z","closed_at":"2026-02-17T23:15:31Z","close_reason":"Fixed in PR #477","labels":["oidc","security"]}
{"id":"med-tracker-6iqh","title":"Buttons should be :disabled when user lacks authorization","description":"Action buttons (e.g. \"Add Medicine\", \"Add Prescription\") are visible to users who are not authorized to perform the action. For example, jane.doe (parent role) sees the \"Add Medicine\" button on the medicines page but is not authorized to use it. Buttons should render with `disabled: true` and appropriate styling when the current user's policy denies the action, rather than being fully clickable and returning a 403/redirect.\n\nAffected components:\n- `Components::People::ShowView` — \"Add Prescription\" link shown without policy check\n- `Components::Medicines::IndexView` — \"Add Medicine\" button visible to unauthorized users\n- Any other action buttons that don't gate on policy","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-09T23:13:37Z","updated_at":"2026-02-09T23:56:35Z","closed_at":"2026-02-09T23:56:35Z","close_reason":"Fixed: Gated Add Prescription and Add Medicine buttons on policy checks","labels":["accessibility","authorization","ui"],"dependencies":[{"issue_id":"med-tracker-6iqh","depends_on_id":"med-tracker-3j9m","type":"parent-child","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-6qqx","title":"UserPolicy doesn't use ApplicationPolicy helper methods","description":"UserPolicy uses user\u0026.administrator? || false directly instead of the admin? helper method defined in ApplicationPolicy. All other policies use admin?, making UserPolicy inconsistent.","status":"closed","priority":3,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-11T13:38:41Z","created_by":"Dan Webb","updated_at":"2026-02-19T23:40:37Z","closed_at":"2026-02-19T23:40:37Z","close_reason":"Updated UserPolicy to use ApplicationPolicy helper methods like admin? for consistency.","labels":["cleanup","consistency","policies"]}
{"id":"med-tracker-6sni","title":"MedicationTakePolicy only handles prescription-based takes, not person_medicine","description":"MedicationTakePolicy#adult_with_own_prescription? calls record.prescription.person_id but MedicationTake can also belong_to :person_medicine. If a take has no prescription (only person_medicine), this will raise NoMethodError. The person_id_for_authorization method has the same issue.","status":"closed","priority":1,"issue_type":"bug","owner":"dan.webb@damacus.io","created_at":"2026-02-11T13:38:37Z","created_by":"Dan Webb","updated_at":"2026-02-17T22:53:57Z","closed_at":"2026-02-17T22:53:57Z","close_reason":"Fixed in PR #474","labels":["authorization","policies","security"]}
{"id":"med-tracker-6vzp","title":"Fix medicine_lookup_spec failures caused by webmock blocking async Stimulus search requests","description":"spec/features/medicine_lookup_spec.rb has 3 failing scenarios because the search is triggered via an async Stimulus AJAX call, but allow_any_instance_of stubs only apply to the test process — not the server process handling the request. WebMock (added to spec_helper.rb) blocks the real HTTP calls but the stubs don't cross the process boundary.\n\nFailing specs:\n- Medicine Lookup User searches for a medicine and sees results\n- Medicine Lookup Search returns no results  \n- Medicine Lookup API unavailable shows error message\n\nFix options:\n1. Use WebMock to stub the NHS dm+d HTTP calls directly (stub the HTTP layer, not the Ruby class)\n2. Move these to request specs that test the controller action directly\n3. Use VCR cassettes for the HTTP calls","status":"closed","priority":2,"issue_type":"bug","owner":"dan.webb@damacus.io","created_at":"2026-02-18T11:41:08Z","created_by":"Dan Webb","updated_at":"2026-02-19T23:40:32Z","closed_at":"2026-02-19T23:40:32Z","close_reason":"Fixed medicine_lookup_spec failures by using WebMock network stubs instead of class-level stubs, ensuring reliability across process boundaries in system tests."}
{"id":"med-tracker-6wh","title":"[OIDC-SEC-011] OIDC account hijacking prevention via email verification","description":"OIDC account hijacking prevention via email verification. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:16Z","updated_at":"2026-02-17T23:11:22Z","closed_at":"2026-02-17T23:11:22Z","close_reason":"Fixed in PR #476","labels":["oidc","security"]}
{"id":"med-tracker-6zq","title":"[E2E-010] Medicine management and prescription integration","description":"Medicine management and prescription integration. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:30Z","updated_at":"2026-01-19T16:31:30Z","labels":["e2e"]}
{"id":"med-tracker-6zxf","title":"Config: Use environment variables for WebAuthn origin instead of hardcoded URLs","description":"webauthn_origin in rodauth_main.rb hardcodes production URL. Use ENV.fetch('APP_URL') to support any hosting environment. Never hardcode HTTPS addresses.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T10:14:10Z","updated_at":"2026-01-28T10:17:19Z","closed_at":"2026-01-28T10:17:19Z","close_reason":"Replaced hardcoded URLs with APP_URL environment variable","labels":["config","webauthn"]}
{"id":"med-tracker-71b","title":"Medicine Lookup Features","description":"Search, external APIs, autocomplete. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:36Z","updated_at":"2026-01-19T16:29:36Z"}
{"id":"med-tracker-7ao","title":"[OIDC-SEC-012] OIDC session fixation prevention","description":"OIDC session fixation prevention. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:18Z","updated_at":"2026-02-17T23:13:34Z","closed_at":"2026-02-17T23:13:34Z","close_reason":"Completed - OIDC session fixation prevention implemented with active_sessions feature enabled. Tests passing.","labels":["oidc","security"]}
{"id":"med-tracker-7axt","title":"Add delegation methods to Prescription model","description":"To follow Law of Demeter, add delegation methods to Prescription model to avoid message chains like:\n- prescription.medicine.name\n- prescription.person.name\n- prescription.dosage.amount\n\nAdd:\n```ruby\ndelegate :name, to: :medicine, prefix: true\ndelegate :name, to: :person, prefix: true\ndelegate :amount, :unit, to: :dosage, prefix: true, allow_nil: true\n```\n\nThis allows calling:\n- prescription.medicine_name\n- prescription.person_name\n- prescription.dosage_amount","status":"closed","priority":3,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-02T17:11:22Z","created_by":"Dan Webb","updated_at":"2026-02-19T23:40:48Z","closed_at":"2026-02-19T23:40:48Z","close_reason":"Added delegation methods to Prescription model for medicine_name, person_name, and dosage_amount/unit to follow Law of Demeter.","labels":["models","refactoring","sandi-metz"]}
{"id":"med-tracker-7bt","title":"[INVITE-004] Admin can resend invitation","description":"Admin can resend invitation. Feature file: features/invitations.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:43Z","updated_at":"2026-01-19T16:30:43Z","labels":["invitations"]}
{"id":"med-tracker-7exu","title":"Extract query objects for Admin::UsersController filtering logic","description":"The Admin::UsersController has filtering/sorting logic (apply_search, apply_role_filter, apply_status_filter, apply_sorting) that should be extracted to a UserQuery class following Sandi Metz principles.\n\nThis would reduce controller complexity and improve testability.\n\nExample implementation:\n```ruby\n# app/queries/user_query.rb\nclass UserQuery\n  def initialize(scope = User.all)\n    @scope = scope\n  end\n\n  def search(term)\n    # ...\n  end\n\n  def by_role(role)\n    # ...\n  end\n\n  def by_status(status)\n    # ...\n  end\n\n  def sorted(column, direction)\n    # ...\n  end\nend\n```","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-02T17:11:14Z","created_by":"Dan Webb","updated_at":"2026-02-02T17:11:14Z","labels":["controllers","refactoring","sandi-metz"]}
{"id":"med-tracker-7f6","title":"[OTEL-015] Background job tracing with Solid Queue","description":"Background job tracing with Solid Queue. Feature file: features/observability.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:07Z","updated_at":"2026-01-19T16:32:07Z","labels":["observability"]}
{"id":"med-tracker-7f7","title":"[ADMIN-022] Complete admin user management workflow","description":"Complete admin user management workflow. Feature file: features/admin.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:24Z","updated_at":"2026-01-19T16:30:24Z","labels":["admin"]}
{"id":"med-tracker-7p5","title":"Security Features","description":"2FA, passkeys, OIDC, CSP. Feature file: features/security.json","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-19T16:29:55Z","updated_at":"2026-01-19T16:29:55Z"}
{"id":"med-tracker-7qj","title":"[PROFILE-006] User can view notification preferences","description":"User can view notification preferences. Feature file: features/profile.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:30:55Z","updated_at":"2026-01-19T16:30:55Z","labels":["profile"]}
{"id":"med-tracker-7ru","title":"[OIDC-SEC-007] OIDC access token not stored long-term","description":"OIDC access token not stored long-term. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:04Z","updated_at":"2026-02-17T23:13:38Z","closed_at":"2026-02-17T23:13:38Z","close_reason":"Completed - OIDC access token not stored long-term; only provider and UID stored in account_identities table. Tests passing.","labels":["oidc","security"]}
{"id":"med-tracker-7vh","title":"Dosages Features","description":"Dosage options, units, validation. Feature file: features/dosages.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:27Z","updated_at":"2026-01-19T16:29:27Z"}
{"id":"med-tracker-7w0","title":"[I18N-005] Validation messages translated","description":"Validation messages translated. Feature file: features/i18n.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:39Z","updated_at":"2026-01-19T16:30:39Z","labels":["i18n"]}
{"id":"med-tracker-82b","title":"Audit Trail Features","description":"Change logging, compliance, data integrity. Feature file: features/audit.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:16Z","updated_at":"2026-01-19T16:29:16Z"}
{"id":"med-tracker-8dj","title":"[E2E-005] Admin reviews complete audit trail for user lifecycle","description":"Admin reviews complete audit trail for user lifecycle. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:17Z","updated_at":"2026-01-19T16:31:17Z","labels":["e2e"]}
{"id":"med-tracker-8uym","title":"Production admin users page shows stale actions and misleading status for verification","description":"## Problem summary\nIn production (`https://med-tracker.ironstone.casa`), the Admin → Users page does not expose account verification state/actions and appears visually degraded. This blocks support workflows when a user cannot log in due to an unverified account.\n\n## Reproduction context\n- Environment: production\n- Affected user: `dan.m.webb@gmail.com`\n- Symptom on login: redirected to verify resend flow with message:\n  - \"The account you tried to login with is currently awaiting verification\"\n- Admin can log in and open `/admin/users`, but the row for the affected user only shows:\n  - `Status: Active`\n  - Actions: `Edit`, `Deactivate`\n  - No `Verify` / `Verified` controls visible\n\n## Why this is a bug\n`Active` in admin users table represents user activation (active/inactive), not Rodauth account verification state. This creates a misleading support signal: an admin sees \"Active\" but the same account is blocked from login as unverified.\n\n## Technical findings\n1. Current branch code includes manual verification controls and backend flow:\n   - UI action rendering in `app/components/admin/users/user_row.rb`\n   - verify endpoint/controller logic in `app/controllers/admin/users_controller.rb`\n   - authorization in `app/policies/user_policy.rb`\n   - route in `config/routes.rb`\n2. Production behavior indicates these changes are not present (or not effective) on deployed build.\n3. Production browser console also shows CSP blocks (fonts/inline script), degrading visual presentation and making page look older/simpler.\n\n## Business/user impact\n- Support/admin cannot resolve unverified-account login failures from UI.\n- Users may be blocked from authentication despite appearing \"active\" to admins.\n- Increased operational burden (manual console intervention required).\n\n## Proposed remediation\n1. Deploy admin manual verification feature set to production.\n2. Ensure Admin Users table includes explicit verification action/state (`Verify`/`Verified`).\n3. Keep activation status and verification status clearly distinct in admin UI.\n4. Audit production CSP policy to allow required assets (or update frontend to match CSP) so admin UI styling is consistent and not degraded.\n5. Add production smoke check for admin users page actions and login flow for unverified account.\n\n## Suggested implementation notes\n- Ensure `verify` member route and policy are active in prod.\n- Verify controller transaction updates `Account.status` to `verified` and deletes `account_verification_keys`.\n- Consider adding an explicit verification status badge/column to avoid confusion with activation status.\n- Add deployment checklist item: admin users row includes verification controls.\n","acceptance_criteria":"## DONE criteria\n- [ ] Deploy includes manual verification flow on production:\n  - [ ] `POST /admin/users/:id/verify` route exists and is reachable by admin\n  - [ ] Admin-only authorization enforced\n  - [ ] Verify action sets `accounts.status = verified`\n  - [ ] Verify action removes stale `account_verification_keys`\n- [ ] Admin Users UI in production shows verification controls/state per row:\n  - [ ] Unverified accounts show `Verify` action\n  - [ ] Verified accounts show disabled `Verified` indicator\n  - [ ] Existing activate/deactivate controls remain intact\n- [ ] Ambiguity removed between activation and verification:\n  - [ ] UI text/labels make clear that `Active` != `Verified`\n  - [ ] (Preferred) add explicit verification status in row or actions\n- [ ] End-to-end production validation completed:\n  - [ ] Reproduce with `dan.m.webb@gmail.com` before fix (fails due to unverified)\n  - [ ] Run verify action as admin in UI\n  - [ ] Confirm same user can log in successfully after verify\n- [ ] CSP/style health verified in production:\n  - [ ] Admin users page loads with intended styling (no major degradation)\n  - [ ] CSP violations for critical UI assets are resolved or documented with accepted risk\n- [ ] Regression safety:\n  - [ ] Relevant specs pass in CI (policy/controller/system)\n  - [ ] Add/maintain test coverage for verify action and verified UI state\n- [ ] Operational note added:\n  - [ ] Document temporary console fallback for manual verification in incident runbook","status":"open","priority":1,"issue_type":"bug","owner":"dan.webb@damacus.io","created_at":"2026-02-23T13:24:04Z","created_by":"Dan Webb","updated_at":"2026-02-23T13:24:04Z"}
{"id":"med-tracker-8x8","title":"[OIDC-005] OIDC account identity persistence: Verify provider identity storage","description":"OIDC account identity persistence: Verify provider identity storage. Feature file: features/authentication.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:29Z","updated_at":"2026-02-17T23:22:21Z","closed_at":"2026-02-17T23:22:21Z","close_reason":"Already implemented via account_identities table and Rodauth OmniAuth","labels":["authentication","oidc"]}
{"id":"med-tracker-8yu","title":"[UI-023] Add toast notifications for async actions","description":"Add toast notifications for async actions. Feature file: features/ui_improvements.json","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-01-19T16:35:30Z","updated_at":"2026-02-11T11:35:26Z","closed_at":"2026-02-11T11:35:26Z","close_reason":"Added turbo_stream format to take_medicine actions in PrescriptionsController and PersonMedicinesController. Toast notifications now appear without full page reload when taking medicine via Turbo.","labels":["ui-improvements"]}
{"id":"med-tracker-90m","title":"[PEOPLE-018] Person deletion and data integrity","description":"Person deletion and data integrity. Feature file: features/people.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:10Z","updated_at":"2026-01-19T16:31:10Z","labels":["people"]}
{"id":"med-tracker-921","title":"[MLKP-011] View SPC (Summary of Product Characteristics) link","description":"View SPC (Summary of Product Characteristics) link. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:29Z","updated_at":"2026-01-19T16:33:29Z","labels":["medicine-lookup"]}
{"id":"med-tracker-938","title":"PWA Features","description":"Offline support, installability. Feature file: features/pwa.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:53Z","updated_at":"2026-01-19T16:29:53Z"}
{"id":"med-tracker-98a","title":"[A11Y-011] HTML element has lang attribute","description":"Inspect HTML element; Verify lang attribute is present (e.g., lang='en'); Run Lighthouse accessibility audit; Verify html-has-lang audit passes. Feature file: features/accessibility.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:30:18Z","updated_at":"2026-02-18T10:22:20Z","closed_at":"2026-02-18T10:22:20Z","close_reason":"Fixed: Added lang='en' to the html element in app/views/layouts/application.html.erb for WCAG A11Y-011 compliance.","labels":["accessibility"]}
{"id":"med-tracker-99f","title":"[OIDC-SEC-008] OIDC authorization code flow used (not implicit)","description":"OIDC authorization code flow used (not implicit). Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:06Z","updated_at":"2026-02-17T23:13:38Z","closed_at":"2026-02-17T23:13:38Z","close_reason":"Completed - OIDC authorization code flow implemented with response_type: :code (not implicit). Tests passing.","labels":["oidc","security"]}
{"id":"med-tracker-9dz","title":"[PERF-004] No N+1 queries on admin user list","description":"No N+1 queries on admin user list. Feature file: features/performance.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:42Z","updated_at":"2026-01-19T16:31:42Z","labels":["performance"]}
{"id":"med-tracker-9ep","title":"[MLKP-017] Rate limit external API calls","description":"Rate limit external API calls. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:41Z","updated_at":"2026-01-19T16:33:41Z","labels":["medicine-lookup"]}
{"id":"med-tracker-9fr9","title":"Redesign mobile hamburger menu as slide-out drawer","description":"The current mobile hamburger menu is poor UX — it needs to be replaced with a slide-out drawer that enters from the left-hand side, similar to the Kısık Ateş app example (yellow reference image). The drawer should overlay the main content with a semi-transparent backdrop, contain navigation links with icons (Medicines, People, Medicine Finder, Profile, Administration, Logout), and dismiss on backdrop tap or swipe.\n\nCurrent state (screenshots attached to conversation):\n1. Menu opens as a full-screen overlay with no slide animation\n2. No backdrop or transition\n3. Layout doesn't match modern mobile drawer patterns\n\nDesired state:\n- Hamburger icon triggers a left-to-right slide-out drawer\n- Drawer partially covers the screen (~75-80% width) with backdrop dimming\n- Smooth CSS transition/animation\n- Navigation items with icons, grouped logically (main nav, account, logout)\n- Tap outside drawer or swipe left to dismiss\n- App branding/logo at top of drawer","acceptance_criteria":"- [ ] Hamburger menu slides out from the left side of the screen\n- [ ] Drawer width is ~75-80% of viewport on mobile\n- [ ] Semi-transparent backdrop behind drawer dims main content\n- [ ] Smooth CSS transition animation (slide + fade backdrop)\n- [ ] Tapping backdrop dismisses the drawer\n- [ ] Navigation items display with icons matching current menu items\n- [ ] Responsive design conforming to UI Professional skill guidelines (Gestalt proximity, visual hierarchy, signal-to-noise ratio)\n- [ ] Touch targets meet WCAG 2.2 SC 2.5.8 minimum (24x24px, 44x44px recommended)\n- [ ] Works correctly on common mobile viewports (320px–428px width)\n- [ ] Drawer is accessible (focus trap, Escape key dismissal, aria attributes)\n- [ ] No layout shift or content jump when drawer opens/closes","notes":"Second commit adds hamburgers Spring animated icon per user feedback. Drawer now uses CSS-animated hamburger (3-line → X spring animation), backdrop dismiss works, Escape key works, Stimulus outlet pattern connects sheet-content back to sheet controller to reset hamburger state on close.","status":"closed","priority":2,"issue_type":"bug","assignee":"cascade","created_at":"2026-02-09T21:28:16Z","updated_at":"2026-02-09T22:08:09Z","closed_at":"2026-02-09T21:48:56Z","close_reason":"Implemented slide-out drawer. PR #439 created.","labels":["accessibility","mobile","ui","ux"]}
{"id":"med-tracker-9g3u","title":"Dose counter badge too small for touch interaction","description":"PersonMedicines::Card dose counter (line 124) uses text-xs with px-2 py-1, likely resulting in badge under 24px height. While informational, if users might tap it (future feature), it should meet minimum size.\n\nLocation: app/components/person_medicines/card.rb:124\n\nCurrent: text-xs font-medium px-2 py-1 rounded-full","acceptance_criteria":"- Badge has min-h-[24px] for WCAG compliance\n- Visual appearance remains compact but tappable\n- Tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-05T16:04:59Z","updated_at":"2026-02-09T17:58:24Z","closed_at":"2026-02-09T17:58:24Z","close_reason":"Fixed in PR #434 - added min-h-[24px] to dose counter badge","labels":["accessibility","quick-fix","ui"]}
{"id":"med-tracker-9i0","title":"Carer Relationships Features","description":"Linking carers to patients, capacity support. Feature file: features/carer_relationships.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:24Z","updated_at":"2026-01-19T16:29:24Z"}
{"id":"med-tracker-9ro","title":"[MLKP-013] Filter search results by form","description":"Filter search results by form. Feature file: features/medicine_lookup.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:33:33Z","updated_at":"2026-01-19T16:33:33Z","labels":["medicine-lookup"]}
{"id":"med-tracker-9sh","title":"[PASSKEY-SEC-008] Timeout prevents long-running WebAuthn ceremonies","description":"Timeout prevents long-running WebAuthn ceremonies. Feature file: features/security.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:34:37Z","updated_at":"2026-01-26T21:35:46Z","closed_at":"2026-01-26T21:35:46Z","close_reason":"Verified with tests: 120 second timeout for registration and authentication","labels":["passkey","security"]}
{"id":"med-tracker-9v8","title":"[OIDC-007] OIDC state parameter CSRF protection: Verify state validation","description":"OIDC state parameter CSRF protection: Verify state validation. Feature file: features/authentication.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:32:37Z","updated_at":"2026-02-17T23:13:47Z","closed_at":"2026-02-17T23:13:47Z","close_reason":"Completed - OIDC state parameter CSRF protection verified via omniauth feature providing state parameter. Security tests passing (OIDC-SEC-005).","labels":["authentication","oidc","security"]}
{"id":"med-tracker-9vla","title":"Bottom nav touch targets too small for mobile accessibility","description":"Bottom navigation items use h-5 w-5 (20x20px) icons with text-[10px] labels. The overall touch target area is likely below the WCAG 2.2 SC 2.5.8 minimum of 24x24px and well below the recommended 44x44px for mobile touch targets. This makes navigation difficult on mobile devices.","acceptance_criteria":"- Bottom nav items have minimum 44x44px touch target area\n- Icons and labels remain visually appropriate\n- WCAG 2.2 SC 2.5.8 compliance\n- Tests pass","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-05T21:26:17Z","updated_at":"2026-02-05T23:09:58Z","closed_at":"2026-02-05T23:09:58Z","close_reason":"Fixed in PR #419. Added 44px minimum touch targets.","labels":["accessibility","quick-fix","ui"]}
{"id":"med-tracker-a4m","title":"[OTEL-012] Sampling configuration for production","description":"Sampling configuration for production. Feature file: features/observability.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:03Z","updated_at":"2026-01-19T16:32:03Z","labels":["observability"]}
{"id":"med-tracker-a5ag","title":"UI Overhaul: High-Fidelity Aesthetic Implementation","description":"Implement the new aesthetic design from mockup.html. This includes: 1) Transitioning to softer [2rem] rounded corners across the system. 2) Implementing the 10-palette theme system via CSS variables. 3) Overhauling the Dashboard with visual timelines, health insights, and inventory progress bars. 4) Adding backdrop blurs and subtle gradients for a premium feel. 5) Migrating from standard Tailwind colors to the new theme-able variable system.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-18T12:52:29Z","created_by":"Dan Webb","updated_at":"2026-02-18T12:52:29Z","labels":["ui"]}
{"id":"med-tracker-ada0","title":"Fix N+1 queries in PersonCard prescription count","description":"PersonCard#prescription_count_text calls person.prescriptions.active.any? and person.prescriptions.active.count separately. The active scope uses date-based WHERE that cannot use eager-loaded data, causing 2 extra queries per card rendered on the index/dashboard.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-11T13:38:27Z","created_by":"Dan Webb","updated_at":"2026-02-18T10:26:48Z","closed_at":"2026-02-18T10:26:48Z","close_reason":"Fixed N+1 queries in PersonCard. PR #481 open on cascade/coding-agent-med-tracker-ada0-dddbf5.","labels":["components","n-plus-one","performance"]}
{"id":"med-tracker-adf","title":"[PROFILE-007] User can set timezone","description":"User can set timezone. Feature file: features/profile.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:30:57Z","updated_at":"2026-01-19T16:30:57Z","labels":["profile"]}
{"id":"med-tracker-avxh","title":"Profile application performance with Vernier","description":"Add Vernier profiling to identify performance bottlenecks and optimize application performance before production deployment.\n\nVernier is a next-generation Ruby profiler that provides detailed performance insights with low overhead.\n\nRepository: https://github.com/jhawthorn/vernier\n\nTasks:\n- Add vernier gem to Gemfile (development/test groups)\n- Profile key user flows (authentication, prescription management, dashboard loading)\n- Profile database queries and N+1 issues\n- Profile view rendering and component performance\n- Document profiling results and identify optimization opportunities\n- Create follow-up issues for any performance bottlenecks discovered\n\nThis will help ensure the application performs well under production load.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-27T22:45:12Z","updated_at":"2026-01-27T22:45:12Z","labels":["performance","production-readiness"]}
{"id":"med-tracker-awpr","title":"Parallel test execution blocked by Ruby 4.0.1 + pg 1.6.3 upstream bugs","description":"Minitest parallelization is disabled (workers: 1) due to two upstream bugs:\n\n1. **Fork-based (with: :processes)**: pg gem 1.6.3 native C `connect_start` segfaults when forked child processes try to create new PG connections. Crash occurs in `PG::Connection.connect_to_hosts` -\u003e `self.connect_start(iopts)`. Confirmed NOT caused by OpenTelemetry instrumentation — crashes even with all OTel disabled.\n\n2. **Thread-based (with: :threads)**: ActiveRecord connection pool uses `ActiveSupport::Concurrency::NullLock` instead of proper mutex locking. Causes `ActiveRecord::ActiveRecordError: Cannot expire connection, it is owned by a different thread`. Setting `config.active_support.isolation_level = :thread` does not resolve it — the pool lock mechanism is separate from IsolatedExecutionState.\n\n**Environment**: Ruby 4.0.1, pg 1.6.3, Rails 8.1.2, ActiveRecord 8.1.2, PostgreSQL 18\n\n**Workaround**: `parallelize(workers: 1)` in test_helper.rb\n\n**Resolution**: Monitor pg gem and Rails releases for fixes. Re-enable when either fork safety or thread-safe connection pooling is fixed upstream.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-12T18:22:52Z","updated_at":"2026-02-12T18:22:52Z","labels":["testing","upstream"]}
{"id":"med-tracker-b06","title":"[E2E-006] Nurse records medications for multiple patients in shift","description":"Nurse records medications for multiple patients in shift. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:19Z","updated_at":"2026-01-19T16:31:19Z","labels":["e2e"]}
{"id":"med-tracker-b2rm","title":"Refactor: Extract complex logic from TwoFactorCard Phlex component","description":"app/views/profiles/two_factor_card.rb has mixed logic and presentation (239 lines). Extract complex conditional logic into private methods for better readability. Follow Phlex best practices.","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-28T10:14:16Z","updated_at":"2026-01-28T10:14:16Z","labels":["code-quality","phlex","refactor"]}
{"id":"med-tracker-b45f","title":"Epic: i18n translations for all hardcoded strings","description":"Add i18n translations for all hardcoded English strings across views, components, controllers, models, and services. Support en, cy, es, pt locales.","design":"Work from main branch (feat/i18n-epic-b45f worktree). The en.yml already has substantial coverage. Focus on finding remaining hardcoded strings in components, views, and controllers that are NOT yet using t() calls. Approach: audit each area, add missing keys to all 4 locale files (en, cy, es, pt), replace hardcoded strings with t() calls. Keep PRs small and focused.","acceptance_criteria":"1. All user-visible strings in components, views, controllers use t() calls\n2. All 4 locale files (en, cy, es, pt) have matching keys\n3. Tests pass (task test)\n4. RuboCop clean (task rubocop)\n5. PR merged to main","notes":"Plan: Start with foundational i18n setup (config, locale files) and identify ~10 hardcoded strings for first PR. Keep PR under 200 lines by focusing on one area (likely views/components). Will add en, cy, es, pt locale structure and translate a small subset of strings to establish pattern.","status":"in_progress","priority":1,"issue_type":"feature","assignee":"cascade","owner":"dan.webb@damacus.io","created_at":"2026-02-12T23:13:05Z","created_by":"Dan Webb","updated_at":"2026-02-18T11:02:09Z"}
{"id":"med-tracker-b5w","title":"[UI-017] Add breadcrumb navigation","description":"Add breadcrumb navigation. Feature file: features/ui_improvements.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:35:15Z","updated_at":"2026-01-19T16:35:15Z","labels":["ui-improvements"]}
{"id":"med-tracker-b6nl","title":"Countdown notice uses same styling as notes - lacks visual distinction","description":"PersonMedicines countdown notice (card.rb:89) and notes (card.rb:66) both use bg-blue-50 border-blue-200. Prescriptions countdown (card.rb:93) also uses blue while notes use amber.\n\nThis violates visual hierarchy - different information types should have distinct styling for quick scanning.\n\nLocations:\n- app/components/person_medicines/card.rb:66, 89\n- app/components/prescriptions/card.rb:84, 93","acceptance_criteria":"- Countdown notices have distinct visual styling from notes\n- Color choices reflect information hierarchy\n- Quick visual scanning is easier\n- Tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T16:05:45Z","updated_at":"2026-02-09T17:50:07Z","closed_at":"2026-02-09T17:50:07Z","close_reason":"Fixed in PR #431 - countdown notices now use amber/warning styling distinct from blue/info notes","labels":["consistency","ui","visual-hierarchy"]}
{"id":"med-tracker-bc6","title":"[UI-016] Standardize icon usage with Lucide icons","description":"Standardize icon usage with Lucide icons. Feature file: features/ui_improvements.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:35:13Z","updated_at":"2026-01-19T16:35:13Z","labels":["ui-improvements"]}
{"id":"med-tracker-bkj","title":"[OTEL-016] Complete observability stack integration test","description":"Complete observability stack integration test. Feature file: features/observability.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:12Z","updated_at":"2026-01-19T16:32:12Z","labels":["observability"]}
{"id":"med-tracker-bkl","title":"[PM-011] Complete OTC medicine management workflow","description":"Complete OTC medicine management workflow. Feature file: features/person_medicines.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:47Z","updated_at":"2026-01-19T16:30:47Z","labels":["person-medicines"]}
{"id":"med-tracker-bp7y","title":"Login page shows 'Please login to continue' twice (Double-Shout)","description":"The login page displays \"Please login to continue\" in TWO places: a global flash banner at the top AND an inline alert within the login form. This is the Double-Shout anti-pattern — it creates cognitive load (\"Are these different issues?\") and reduces trust in the interface.","acceptance_criteria":"- The login page shows the \"Please login to continue\" message only once (inline alert in the form)\n- The global flash banner does NOT duplicate the inline Rodauth alert\n- Tests pass","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-05T21:25:51Z","updated_at":"2026-02-05T21:31:58Z","closed_at":"2026-02-05T21:31:58Z","close_reason":"Fixed in PR #413. Removed inline flash_section from login view.","labels":["quick-fix","signal-to-noise","ui"]}
{"id":"med-tracker-bv3","title":"[UI-010] Implement optimistic UI updates","description":"Implement optimistic UI updates. Feature file: features/ui_improvements.json","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-01-19T16:35:01Z","updated_at":"2026-02-11T11:43:43Z","closed_at":"2026-02-11T11:43:43Z","close_reason":"Added optimistic-take Stimulus controller that disables the Take button and shows 'Taking…' text immediately on submit. Wired into both Prescriptions::Card and PersonMedicines::Card components.","labels":["ui-improvements"]}
{"id":"med-tracker-bwj","title":"[E2E-007] Admin dashboard shows accurate metrics and warnings","description":"Admin dashboard shows accurate metrics and warnings. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:21Z","updated_at":"2026-01-19T16:31:21Z","labels":["e2e"]}
{"id":"med-tracker-bxv","title":"[MLKP-003] View medicine details from external source","description":"View medicine details from external source. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:10Z","updated_at":"2026-01-19T16:33:10Z","labels":["medicine-lookup"]}
{"id":"med-tracker-bzt8","title":"Fix Phlex helpers method deprecation warning","description":"The `helpers` method is deprecated in phlex-rails and will be removed in the next minor version.\n\nTwo components use the deprecated `helpers` method:\n1. `app/components/people/person_card.rb:108-110` — defines `def helpers; @helpers ||= ApplicationController.helpers; end`\n2. `app/components/person_medicines/form_view.rb:71` — calls `helpers.person_path(person)`\n\nThe deprecation message says to use `view_context` instead (not recommended), or preferably use built-in helper adapters or register custom adapters via `register_output_helper` / `register_value_helper`.\n\nSince both components inherit from `Components::Base` which already includes `Phlex::Rails::Helpers::Routes`, the route helpers (like `person_path`) should already be available directly without needing `helpers.` prefix.\n\nFix: Replace `helpers.person_path(person)` with `person_path(person)` and remove the custom `helpers` method from PersonCard.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-12T14:28:11Z","updated_at":"2026-02-12T14:41:25Z","closed_at":"2026-02-12T14:41:25Z","close_reason":"Fixed: removed deprecated helpers method from PersonCard and replaced helpers.person_path with direct person_path in FormView","labels":["deprecation","phlex","tech-debt"]}
{"id":"med-tracker-c8f","title":"[PEOPLE-016] Complete person creation and management workflow","description":"Complete person creation and management workflow. Feature file: features/people.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:06Z","updated_at":"2026-01-19T16:31:06Z","labels":["people"]}
{"id":"med-tracker-c94","title":"[DASH-008] Dashboard shows patient without carer warning","description":"Dashboard shows patient without carer warning. Feature file: features/dashboard.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:28Z","updated_at":"2026-01-19T16:30:28Z","labels":["dashboard"]}
{"id":"med-tracker-cb9","title":"[PASSKEY-003] Passkey login: User can login with registered passkey","description":"Passkey login: User can login with registered passkey. Feature file: features/authentication.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:46Z","updated_at":"2026-01-19T16:32:46Z","labels":["authentication","passkey"]}
{"id":"med-tracker-cepv","title":"Security: Restore mandatory 2FA enforcement for privileged roles","description":"The require_two_factor_setup method was removed in commit 5b4a65000, allowing administrators, doctors, and nurses to bypass 2FA setup. Need to restore enforcement but allow users to use the system before AND after 2FA is enabled - only enforce setup requirement, not authentication requirement.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-28T10:14:04Z","updated_at":"2026-01-28T10:39:24Z","closed_at":"2026-01-28T10:39:24Z","close_reason":"Implemented soft 2FA enforcement with flash notices for privileged roles","labels":["2fa","critical","security"]}
{"id":"med-tracker-cfg","title":"Navigation Features","description":"Menus, breadcrumbs, routing. Feature file: features/navigation.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:39Z","updated_at":"2026-01-19T16:29:39Z"}
{"id":"med-tracker-cg9b","title":"Extract shared policy helpers into PolicyHelpers module","description":"The ApplicationPolicy has helper methods duplicated between Policy and Scope classes:\n- admin?\n- admin_or_clinician?\n- doctor?\n- nurse?\n- medical_staff?\n- carer_or_parent?\n\nThese should be extracted to a shared PolicyHelpers module included in both.\n\nExample:\n```ruby\n# app/policies/concerns/policy_helpers.rb\nmodule PolicyHelpers\n  def admin?\n    user\u0026.administrator? || false\n  end\n\n  def admin_or_clinician?\n    user\u0026.administrator? || user\u0026.doctor? || user\u0026.nurse? || false\n  end\n  # ...\nend\n```\n\nThen include in both ApplicationPolicy and ApplicationPolicy::Scope.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-02T17:11:19Z","created_by":"Dan Webb","updated_at":"2026-02-19T23:40:53Z","closed_at":"2026-02-19T23:40:53Z","close_reason":"Extracted shared policy helpers into a shared PolicyHelpers module used by both ApplicationPolicy and ApplicationPolicy::Scope.","labels":["policies","refactoring","sandi-metz"]}
{"id":"med-tracker-cn3s","title":"[SCAN-003] Integrate Scanner into Add Medicine Flow","description":"Integrate the scanner into the `PersonMedicine` creation flow, allowing users to quickly add OTC/supplements by scanning their packaging.","acceptance_criteria":"- User can scan a barcode from the 'Add Medicine' screen\n- Scanned data auto-fills the medicine creation form\n- User can confirm and save the new medicine entry","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:39:44Z","updated_at":"2026-01-19T16:39:44Z","labels":["integration","ux"],"dependencies":[{"issue_id":"med-tracker-cn3s","depends_on_id":"med-tracker-514","type":"blocks","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"},{"issue_id":"med-tracker-cn3s","depends_on_id":"med-tracker-coq","type":"blocks","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"},{"issue_id":"med-tracker-cn3s","depends_on_id":"med-tracker-mol","type":"blocks","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-coq","title":"[UI-022] Ensure keyboard navigation works throughout","description":"Ensure keyboard navigation works throughout. Feature file: features/ui_improvements.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:35:28Z","updated_at":"2026-02-11T13:43:58Z","closed_at":"2026-02-11T13:43:58Z","close_reason":"Added skip-to-content link to Navigation component, focus-visible ring styles to nav__link, nav__brand-link CSS classes, and focus-visible:ring-2 to BottomNav links. Added keyboard navigation spec covering all changes.","labels":["accessibility","ui-improvements"]}
{"id":"med-tracker-crh","title":"[UI-019] Add global search functionality","description":"Add global search functionality. Feature file: features/ui_improvements.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:35:22Z","updated_at":"2026-01-19T16:35:22Z","labels":["ui-improvements"]}
{"id":"med-tracker-ctii","title":"Test: Replace raw SQL with ActiveRecord in two_factor_management_spec.rb","description":"spec/features/profiles/two_factor_management_spec.rb uses ActiveRecord::Base.connection.execute with string interpolation (lines 76-83). Replace with AccountRecoveryCode.where(id: account.id).delete_all to avoid SQL injection patterns.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-28T10:14:13Z","updated_at":"2026-01-28T10:15:55Z","closed_at":"2026-01-28T10:15:55Z","close_reason":"Replaced raw SQL with ActiveRecord methods","labels":["code-quality","testing"]}
{"id":"med-tracker-d1x","title":"Admin Features","description":"User management, dashboard insights, system administration. Feature file: features/admin.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:14Z","updated_at":"2026-01-19T16:29:14Z"}
{"id":"med-tracker-d3ix","title":"Medicines page title/heading missing or incorrect","description":"The medicines index page should show a friendly, beautiful empty state when the user has no medicines assigned. Something like \"You do not currently have any medicines assigned to you\" with appropriate styling. Currently the page likely shows nothing or a bare list.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-09T23:13:32Z","updated_at":"2026-02-09T23:56:37Z","closed_at":"2026-02-09T23:56:37Z","close_reason":"Fixed: Added beautiful empty state with Pill icon to medicines index","labels":["ui"],"dependencies":[{"issue_id":"med-tracker-d3ix","depends_on_id":"med-tracker-3j9m","type":"parent-child","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-dcj","title":"[PASSKEY-SEC-011] Transport-specific security for different authenticator types","description":"Transport-specific security for different authenticator types. Feature file: features/security.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:34:43Z","updated_at":"2026-01-26T21:35:50Z","closed_at":"2026-01-26T21:35:50Z","close_reason":"Verified with test: authenticator_attachment nil allows both platform and cross-platform","labels":["passkey","security"]}
{"id":"med-tracker-dflj","title":"Badge component lacks minimum height for WCAG compliance","description":"Badge component (ruby_ui/badge/badge.rb) defines sizes but doesn't enforce min-h-[24px] for WCAG 2.2 SC 2.5.8 compliance. Small badges (px-1.5 py-0.5) may fall below 24px minimum.\n\nLocation: app/components/ruby_ui/badge/badge.rb:6-9\n\nCurrent sizes don't guarantee 24px height, especially :sm variant.","acceptance_criteria":"- Badge sizes include min-h-[24px] for all variants\n- Badges meet WCAG 2.2 SC 2.5.8 minimum target size\n- Visual appearance remains clean\n- Tests pass","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:04:50Z","updated_at":"2026-02-06T23:48:05Z","closed_at":"2026-02-06T23:48:05Z","close_reason":"Added min-h-[24px] to Badge component base classes for WCAG 2.2 SC 2.5.8 compliance. Added Badge spec.","labels":["accessibility","quick-fix","ui","wcag"]}
{"id":"med-tracker-dh0","title":"[PASSKEY-SEC-004] User verification ensures biometric or PIN authentication","description":"User verification ensures biometric or PIN authentication. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:26Z","updated_at":"2026-01-26T21:35:39Z","closed_at":"2026-01-26T21:35:39Z","close_reason":"Verified with tests: user_verification required for registration and authentication","labels":["passkey","security"]}
{"id":"med-tracker-dh7","title":"[MLKP-020] Non-admin cannot change data source settings","description":"Non-admin cannot change data source settings. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:49Z","updated_at":"2026-01-19T16:33:49Z","labels":["medicine-lookup"]}
{"id":"med-tracker-e2a","title":"[PASSKEY-SEC-003] WebAuthn origin validation prevents phishing","description":"WebAuthn origin validation prevents phishing. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:24Z","updated_at":"2026-01-26T21:35:38Z","closed_at":"2026-01-26T21:35:38Z","close_reason":"Verified with tests: relying party domain configuration for phishing prevention","labels":["passkey","security"]}
{"id":"med-tracker-ebe","title":"[PASSKEY-004] Passkey autofill: Browser autofills passkey credential on login page","description":"Passkey autofill: Browser autofills passkey credential on login page. Feature file: features/authentication.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:32:48Z","updated_at":"2026-01-19T16:32:48Z","labels":["authentication","passkey"]}
{"id":"med-tracker-eee","title":"[MLKP-001] Search medicines from NHS dm+d database","description":"Search medicines from NHS dm+d database. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:06Z","updated_at":"2026-01-19T16:33:06Z","labels":["medicine-lookup"]}
{"id":"med-tracker-efz","title":"[OIDC-SEC-006] OIDC nonce prevents token replay attacks","description":"OIDC nonce prevents token replay attacks. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:02Z","updated_at":"2026-02-17T23:13:40Z","closed_at":"2026-02-17T23:13:40Z","close_reason":"Completed - OIDC nonce prevents token replay attacks implemented via openid_connect gem automatic nonce handling. Tests added and passing.","labels":["oidc","security"]}
{"id":"med-tracker-eg7","title":"[E2E-008] Complete prescription lifecycle from creation to deactivation","description":"Complete prescription lifecycle from creation to deactivation. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:26Z","updated_at":"2026-01-19T16:31:26Z","labels":["e2e"]}
{"id":"med-tracker-ek8y","title":"Refactor: Extract Components::Layouts::Navigation into smaller Phlex components","description":"Components::Layouts::Navigation is ~228 lines and mixes mobile menu, desktop nav, bottom nav, and profile menu. Extract focused subcomponents while preserving rendered output and behavior.","acceptance_criteria":"- Navigation component decomposed into smaller components\n- No behavioral/UI output change\n- Existing tests pass\n- New/updated specs cover authenticated/unauthenticated rendering","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-02T17:06:15Z","created_by":"Dan Webb","updated_at":"2026-02-19T23:21:34Z","closed_at":"2026-02-19T23:21:34Z","close_reason":"Navigation has been refactored into smaller components (mobile_menu, bottom_nav, profile_menu, sidebar)","labels":["phlex","refactor","ui"]}
{"id":"med-tracker-ey4","title":"[PASSKEY-007] Passkey + password combination: User can have both password and passkey","description":"Passkey + password combination: User can have both password and passkey. Feature file: features/authentication.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:54Z","updated_at":"2026-01-19T16:32:54Z","labels":["authentication","passkey"]}
{"id":"med-tracker-f9zx","title":"Card footer buttons lack consistent min-width for visual stability","description":"Card footer buttons (Take, Edit, Delete, Remove) have varying text lengths but no min-width, causing visual instability. Short labels like \"Take\" appear cramped compared to \"Remove\".\n\nAffects multiple card components where buttons appear side-by-side.\n\nRecommend: Add min-w-[80px] or similar to primary action buttons for visual stability.","acceptance_criteria":"- Primary action buttons have consistent minimum width\n- Visual stability across different label lengths\n- Buttons remain appropriately sized\n- Tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-05T16:05:49Z","updated_at":"2026-02-09T18:06:03Z","closed_at":"2026-02-09T18:06:03Z","close_reason":"Fixed in PR #437 - added min-w-[80px] to Take buttons in both card components","labels":["polish","ui","visual-hierarchy"]}
{"id":"med-tracker-fcs","title":"[E2E-011] Daily dose reset at midnight verification","description":"Daily dose reset at midnight verification. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:32Z","updated_at":"2026-01-19T16:31:32Z","labels":["e2e"]}
{"id":"med-tracker-fen","title":"[MLKP-008] Fallback to secondary source on failure","description":"Fallback to secondary source on failure. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:20Z","updated_at":"2026-01-19T16:33:20Z","labels":["medicine-lookup"]}
{"id":"med-tracker-fjr","title":"[OTEL-005] Error traces capture exceptions","description":"Error traces capture exceptions. Feature file: features/observability.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:55Z","updated_at":"2026-01-19T16:31:55Z","labels":["observability"]}
{"id":"med-tracker-fmo8","title":"Identify and optimize top 20 slowest tests","description":"Reduced test suite runtime by ~19% (2m37s → 2m08s) via: BCrypt MIN_COST in test env, reduced fixture 2FA keys from 6 to 1, removed unnecessary account_otp_keys fixture loading from 21 spec files, bumped --profile to 20.","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-02-12T20:35:34Z","updated_at":"2026-02-12T20:35:38Z","closed_at":"2026-02-12T20:35:38Z","close_reason":"Completed - 19% test suite speedup achieved","labels":["performance","testing"]}
{"id":"med-tracker-fnc","title":"[PASSKEY-SEC-006] Public key cryptography prevents credential theft","description":"Public key cryptography prevents credential theft. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:30Z","updated_at":"2026-01-26T21:35:44Z","closed_at":"2026-01-26T21:35:44Z","close_reason":"Verified with test: stores only public key, not private key","labels":["passkey","security"]}
{"id":"med-tracker-fqe","title":"Observability Features","description":"OpenTelemetry, metrics, tracing, logging. Feature file: features/observability.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:43Z","updated_at":"2026-01-19T16:29:43Z"}
{"id":"med-tracker-fqyg","title":"Inconsistent medicine icon background colors","description":"Medicine icons use different background colors without semantic meaning:\n- PersonMedicines::Card:60 uses bg-green-100 text-green-700\n- Prescriptions::Card:58 uses bg-violet-100 text-violet-700\n- People::PersonCard:37 uses bg-violet-100 text-violet-700\n\nThis violates visual hierarchy - same entity type should have consistent visual treatment.\n\nLocations across card components","acceptance_criteria":"- Consistent icon colors for same entity types\n- Color choices have semantic meaning (e.g., prescriptions vs OTC)\n- Visual hierarchy is clear\n- Tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-05T16:05:02Z","updated_at":"2026-02-09T18:02:46Z","closed_at":"2026-02-09T18:02:46Z","close_reason":"Fixed in PR #436 - standardized medicine icon color to violet","labels":["consistency","ui","visual-hierarchy"]}
{"id":"med-tracker-g0q","title":"[E2E-003] Doctor creates prescription with timing restrictions and carer administers","description":"Doctor creates prescription with timing restrictions and carer administers. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:12Z","updated_at":"2026-01-19T16:31:12Z","labels":["e2e"]}
{"id":"med-tracker-gfx","title":"[PERF-005] Prescription list loads efficiently","description":"Prescription list loads efficiently. Feature file: features/performance.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:44Z","updated_at":"2026-01-19T16:31:44Z","labels":["performance"]}
{"id":"med-tracker-gsa","title":"[MLKP-004] Import medicine from lookup to local database","description":"Import medicine from lookup to local database. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:12Z","updated_at":"2026-01-19T16:33:12Z","labels":["medicine-lookup"]}
{"id":"med-tracker-gy05","title":"Disable take button when medicine is on cooldown or out of stock","description":"Users should not be able to administer drugs if:\n1. The medicine is on cooldown (timing restrictions not met — min hours between doses or max daily doses reached)\n2. The medicine is out of stock (stock is 0)\n\nCurrently, several components render the \"Take Now\" / \"Take\" button without checking cooldown or stock status. The button should be disabled (greyed out) in these cases, with an appropriate message explaining why.\n\n## Affected Components\n\n### Already checking cooldown (✅ partial):\n- `app/components/prescriptions/card.rb` — checks `can_take_now?` for cooldown, but does NOT check stock\n- `app/components/person_medicines/card.rb` — checks `can_take_now?` for cooldown, but does NOT check stock\n\n### NOT checking cooldown OR stock (❌):\n- `app/components/dashboard/prescription_card.rb` — always renders active \"Take Now\" button (no cooldown or stock check)\n- `app/components/dashboard/prescription_row.rb` — always renders active \"Take Now\" button (no cooldown or stock check)\n- `app/components/dashboard/person_schedule.rb` — always renders active \"Take Now\" link (no cooldown or stock check)\n\n### Server-side enforcement gaps (❌):\n- `app/controllers/medication_takes_controller.rb#create` — does NOT check `can_take_now?` or `out_of_stock?` before saving (the prescriptions_controller and person_medicines_controller DO check cooldown but NOT stock)\n\n## Acceptance Criteria\n\n- [ ] All 5 UI components disable the take button when `can_take_now?` is false (cooldown)\n- [ ] All 5 UI components disable the take button when `medicine.out_of_stock?` is true\n- [ ] Disabled buttons show a tooltip or message explaining why (cooldown time remaining, or \"Out of Stock\")\n- [ ] `MedicationTakesController#create` enforces cooldown server-side (like prescriptions_controller already does)\n- [ ] All 3 controllers (`prescriptions_controller`, `person_medicines_controller`, `medication_takes_controller`) enforce stock check server-side\n- [ ] `TimingRestrictions#can_take_now?` or a new method incorporates stock check\n- [ ] Existing tests continue to pass\n- [ ] New tests cover: cooldown disables button, out-of-stock disables button, server-side rejection for both cases","acceptance_criteria":"- All 5 take-button components disable the button when cooldown is active\n- All 5 take-button components disable the button when medicine is out of stock\n- Disabled state shows reason (cooldown remaining or out of stock)\n- MedicationTakesController#create enforces cooldown and stock server-side\n- PrescriptionsController#take_medicine enforces stock server-side\n- PersonMedicinesController#take_medicine enforces stock server-side\n- Full test coverage for both UI and server-side enforcement","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-11T11:30:08Z","updated_at":"2026-02-11T12:39:48Z","closed_at":"2026-02-11T12:39:48Z","close_reason":"Implemented: can_administer? combines cooldown + stock checks across 5 UI components and 3 controllers. Pushed to feat/disable-take-button-cooldown-stock.","labels":["medication","safety","ui"]}
{"id":"med-tracker-hcss","title":"Bottom nav items lack minimum touch target size","description":"Bottom navigation items (layouts/bottom_nav.rb:22) use h-5 w-5 icons with text-[10px] labels. The total touch target is likely under 44px recommended for mobile (WCAG 2.2 SC 2.5.8 Level AAA). While 24px is minimum, mobile nav should aim for 44px.\n\nLocation: app/components/layouts/bottom_nav.rb:22-24\n\nCurrent: flex flex-col items-center gap-1 with h-5 w-5 icon + 10px text","acceptance_criteria":"- Nav items have min-h-[44px] to meet touch target guidelines\n- Adequate padding around clickable area\n- Visual appearance remains clean\n- Tests pass","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:04:41Z","updated_at":"2026-02-06T23:49:03Z","closed_at":"2026-02-06T23:49:03Z","close_reason":"Already implemented. Bottom nav links already have min-h-[44px] and min-w-[44px] classes. Existing spec confirms WCAG compliance.","labels":["accessibility","quick-fix","ui","wcag"]}
{"id":"med-tracker-hdt","title":"Performance Features","description":"Caching, query optimization, load times. Feature file: features/performance.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:46Z","updated_at":"2026-01-19T16:29:46Z"}
{"id":"med-tracker-i1x","title":"[OTEL-010] Structured logging with trace correlation","description":"Structured logging with trace correlation. Feature file: features/observability.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:01Z","updated_at":"2026-01-19T16:32:01Z","labels":["observability"]}
{"id":"med-tracker-i2t5","title":"PersonMedicinesController uses Medicine.all bypassing policy_scope","description":"PersonMedicinesController#new and #create use Medicine.all instead of policy_scope(Medicine). This bypasses Pundit authorization scoping, unlike PrescriptionsController which correctly uses policy_scope(Medicine).","status":"closed","priority":1,"issue_type":"bug","owner":"dan.webb@damacus.io","created_at":"2026-02-11T13:38:30Z","created_by":"Dan Webb","updated_at":"2026-02-17T15:45:36Z","closed_at":"2026-02-17T15:45:36Z","close_reason":"Fixed: replaced Medicine.all with policy_scope(Medicine) in PersonMedicinesController#new and #create. PR #471.","labels":["authorization","controllers","security"]}
{"id":"med-tracker-i8u2","title":"Emoji usage inconsistent - some use emoji, others use icons","description":"Mixed use of emoji and icon components for visual indicators:\n- Prescriptions use emoji: 📅, 🏁, 📝, 🕐, 💊\n- PersonMedicines use emoji: 📝, ⏱️, 🕐, 💊\n- Other components use proper Icon components\n\nEmoji can have accessibility issues (screen readers) and inconsistent rendering. Should standardize on Icon components or document emoji usage policy.\n\nLocations across multiple card components","acceptance_criteria":"- Document emoji usage policy OR migrate to Icon components\n- Consistent approach across codebase\n- Accessibility considerations addressed\n- Tests pass","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-05T16:05:54Z","updated_at":"2026-02-05T16:05:54Z","labels":["accessibility","consistency","ui"]}
{"id":"med-tracker-il0y","title":"PersonCard needs-carer badge uses inline classes instead of Badge component","description":"People::PersonCard (person_card.rb:70-71) defines badge classes inline instead of using RubyUI::Badge component. This violates DRY and creates inconsistency with other badges.\n\nLocation: app/components/people/person_card.rb:70-77\n\nShould use: Badge(variant: :warning) { 'Needs Carer' }","acceptance_criteria":"- PersonCard uses Badge component for needs-carer badge\n- Styling remains consistent with design\n- Code is DRY and maintainable\n- Tests pass","status":"closed","priority":3,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:05:36Z","updated_at":"2026-02-06T23:43:29Z","closed_at":"2026-02-06T23:43:29Z","close_reason":"Already fixed. PersonCard render_needs_carer_badge (line 69-75) already uses RubyUI::Badge.new(variant: :warning) instead of inline classes.","labels":["quick-fix","refactor","ui"]}
{"id":"med-tracker-il9r","title":"Full app E2E test: click every button, verify all paths and icon visibility","description":"Perform a comprehensive end-to-end test of the entire application:\n\n1. As each role (admin, doctor, nurse, carer, parent), navigate every page and click every button\n2. Verify all navigation paths make sense and lead to correct destinations\n3. Verify all buttons work as expected (no broken links, no unexpected errors)\n4. Verify icons represent their usage correctly — action icons should not be visible to users who cannot perform the action\n5. Verify buttons that SHOULD be visible ARE visible for authorized users\n6. Check mobile and desktop viewports\n\nThis should be a Playwright system spec covering the major user journeys for each role.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T23:13:59Z","updated_at":"2026-02-09T23:56:38Z","closed_at":"2026-02-09T23:56:38Z","close_reason":"Completed: Full E2E spec covering admin, parent, nurse, doctor, and mobile viewport","labels":["accessibility","e2e","testing"],"dependencies":[{"issue_id":"med-tracker-il9r","depends_on_id":"med-tracker-3j9m","type":"parent-child","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-ilsa","title":"feat: forecast low-stock and out-of-stock dates from active prescriptions","description":"Derive daily consumption from active prescriptions' max_daily_doses (normalized by cycle) + person_medicines, then forecast days/dates until low-stock and out-of-stock thresholds. Show on medicine detail page. Fix reorder_threshold strong params bug.","status":"closed","priority":2,"issue_type":"feature","owner":"dan.webb@damacus.io","created_at":"2026-02-24T08:55:00Z","created_by":"Dan Webb","updated_at":"2026-02-24T09:10:26Z","closed_at":"2026-02-24T09:10:26Z","close_reason":"Implemented and pushed to feat/533-stock-forecast branch","external_ref":"https://github.com/damacus/med-tracker/issues/533","labels":["forecast","medicines"]}
{"id":"med-tracker-im9","title":"[PERF-001] Dashboard loads in under 500ms","description":"Dashboard loads in under 500ms. Feature file: features/performance.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:36Z","updated_at":"2026-01-19T16:31:36Z","labels":["performance"]}
{"id":"med-tracker-inventory-orders","title":"[INV-002] Implement Medicine Ordering Workflow","description":"Build an ordering workflow to capture supplier, quantity, expected arrival, and status for medicines. This will allow increasing stock levels systematically.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-19T17:30:14Z","updated_at":"2026-01-19T17:30:14Z","labels":["inventory","supply-chain"]}
{"id":"med-tracker-inventory-units","title":"[INV-003] Implement Volume-Based Stock Tracking","description":"Enhance stock tracking to handle different units (ml, mg, pills) and deduct the exact amount recorded in MedicationTake instead of a fixed unit of 1.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T17:30:18Z","updated_at":"2026-01-19T17:30:18Z","labels":["inventory","safety"]}
{"id":"med-tracker-iz1","title":"UI Features","description":"Components, styling, responsive design. Feature file: features/ui.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:57Z","updated_at":"2026-01-19T16:29:57Z"}
{"id":"med-tracker-j3o","title":"[MLKP-007] Configure custom API endpoint","description":"Configure custom API endpoint. Feature file: features/medicine_lookup.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:33:18Z","updated_at":"2026-01-19T16:33:18Z","labels":["medicine-lookup"]}
{"id":"med-tracker-j56","title":"[UI-015] Improve form validation feedback","description":"Improve form validation feedback. Feature file: features/ui_improvements.json","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-01-19T16:35:12Z","updated_at":"2026-02-11T11:39:19Z","closed_at":"2026-02-11T11:39:19Z","close_reason":"Added inline field-level error messages and red border styling to form fields with validation errors. Updated Medicines::FormView, People::FormView, and Admin::Users::FormView. Added shared field_error_class and render_field_error helpers to FormHelpers module.","labels":["ui-improvements"]}
{"id":"med-tracker-j78","title":"People Management Features","description":"Patient records, demographics, person types. Feature file: features/people.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:45Z","updated_at":"2026-01-19T16:29:45Z"}
{"id":"med-tracker-jd3","title":"[PERF-008] Lighthouse accessibility score \u003e= 90%","description":"Lighthouse accessibility score \u003e= 90%. Feature file: features/performance.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:53Z","updated_at":"2026-01-19T16:31:53Z","labels":["performance"]}
{"id":"med-tracker-jnh","title":"[OIDC-008] OIDC multiple identity providers: Verify extensibility for additional providers","description":"OIDC multiple identity providers: Verify extensibility for additional providers. Feature file: features/authentication.json","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-19T16:32:39Z","updated_at":"2026-02-17T23:22:28Z","closed_at":"2026-02-17T23:22:28Z","close_reason":"Already implemented via Rodauth OmniAuth multiple provider support","labels":["authentication","oidc"]}
{"id":"med-tracker-jqx","title":"[PASSKEY-SEC-005] Passkey credential IDs are cryptographically unique","description":"Passkey credential IDs are cryptographically unique. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:28Z","updated_at":"2026-01-26T21:35:40Z","closed_at":"2026-01-26T21:35:40Z","close_reason":"Verified with tests: credential IDs stored and uniqueness enforced","labels":["passkey","security"]}
{"id":"med-tracker-jy3","title":"[MLKP-006] Configure multiple data sources with priority","description":"Configure multiple data sources with priority. Feature file: features/medicine_lookup.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:33:16Z","updated_at":"2026-01-19T16:33:16Z","labels":["medicine-lookup"]}
{"id":"med-tracker-kbmv","title":"Hide Add Medicine when unauthorized; allow parents to add medicines","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-24T22:22:33Z","created_by":"Dan Webb","updated_at":"2026-02-24T22:26:28Z","closed_at":"2026-02-24T22:26:28Z","close_reason":"Closed"}
{"id":"med-tracker-kex","title":"[PRESC-012] Prescription edit and deactivation workflow","description":"Prescription edit and deactivation workflow. Feature file: features/prescriptions.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:53Z","updated_at":"2026-01-19T16:30:53Z","labels":["prescriptions"]}
{"id":"med-tracker-kjjm","title":"Medicines ShowView has unused button class methods","description":"Medicines::ShowView (medicines/show_view.rb:148-156) defines button_primary_classes and button_secondary_classes methods that are never used. Component uses Link component instead.\n\nLocation: app/components/medicines/show_view.rb:148-156\n\nDead code violates signal-to-noise principle.","acceptance_criteria":"- Remove unused button class methods\n- Component still renders correctly\n- Code is cleaner\n- Tests pass","status":"closed","priority":3,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:05:09Z","updated_at":"2026-02-06T23:40:55Z","closed_at":"2026-02-06T23:40:55Z","close_reason":"Removed unused button_primary_classes and button_secondary_classes methods. Added regression test.","labels":["cleanup","quick-fix","ui"]}
{"id":"med-tracker-lqc9","title":"Button size inconsistency in PersonMedicines vs Prescriptions cards","description":"PersonMedicines::Card uses size :sm for \"Take\" button while Prescriptions::Card uses size :md for identical action. This violates visual hierarchy principle - same action should have same visual weight.\n\nLocation: \n- app/components/person_medicines/card.rb:161 uses size: :sm\n- app/components/prescriptions/card.rb:140 uses size: :md\n\nBoth are primary CTAs for taking medicine and should be consistent.","acceptance_criteria":"- Both cards use same button size (recommend :md for better touch targets)\n- Visual consistency across medication cards\n- Tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T16:04:30Z","updated_at":"2026-02-09T17:52:16Z","closed_at":"2026-02-09T17:52:16Z","close_reason":"Fixed in PR #432 - standardized Take button size to :md across medication cards","labels":["consistency","quick-fix","ui"]}
{"id":"med-tracker-m35","title":"[DOSE-014] Dose tracking across multiple prescriptions","description":"Dose tracking across multiple prescriptions. Feature file: features/dose_tracking.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:32Z","updated_at":"2026-01-19T16:30:32Z","labels":["dose-tracking"]}
{"id":"med-tracker-mey6","title":"Medicine cards show both 'Current Supply' and 'Stock' — redundant info","description":"Medicine index cards display both \"Current Supply\" and \"Stock\" as separate fields. These appear to represent the same or very similar concepts, creating signal noise. Users must parse two numbers to understand inventory status. Per signal-to-noise ratio principle, redundant information degrades the interface.","acceptance_criteria":"- Medicine cards show a single, clear inventory indicator\n- Or the distinction between Current Supply and Stock is made clear with context\n- Tests pass","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-02-05T21:26:13Z","updated_at":"2026-02-05T23:06:08Z","closed_at":"2026-02-05T23:06:08Z","close_reason":"Fixed in PR #418. Removed redundant Current Supply card.","labels":["quick-fix","signal-to-noise","ui"]}
{"id":"med-tracker-mol","title":"[OBS-001] Implement ECS Logging Format","description":"Implement Elastic Common Schema (ECS) logging format for the application to improve observability and log aggregation.\n\nCurrent state:\n- Rails standard `TaggedLogging` to `STDOUT`.\n- OpenTelemetry is active but not integrated with log formatting.\n\nRequired Changes:\n1. Add `elastic-ecs` and `lograge` gems.\n2. Configure `config.log_formatter` in `config/environments/production.rb`.\n3. Initialize `lograge` with ECS custom options for structured request logging.\n4. Ensure correlation between OpenTelemetry traces and ECS logs (trace.id/span.id).\n\nThis move aligns with industry standards for structured logging and facilitates better integration with Elastic Stack or other ECS-compatible log processors.","acceptance_criteria":"- Gemfile includes `elastic-ecs` and `lograge`\n- `config.log_formatter = Elastic::ECS::Formatter.new` set in production\n- Lograge configured with `Elastic::ECS.custom_utils.lograge_options`\n- OpenTelemetry `trace.id` and `span.id` are present in JSON logs\n- Logs pass ECS validation (JSON schema)","status":"closed","priority":1,"issue_type":"chore","created_at":"2026-01-19T16:35:55Z","updated_at":"2026-01-19T23:04:09Z","closed_at":"2026-01-19T23:04:09Z","close_reason":"Implemented ECS logging format with ecs-logging and lograge gems. Production logger now uses EcsLogging::Logger with OpenTelemetry trace correlation.","labels":["ecs","logging","observability"]}
{"id":"med-tracker-mw0","title":"[A11Y-012] Heading elements are in sequentially-descending order","description":"Inspect page heading structure; Verify h1 -\u003e h2 -\u003e h3 order (no skipping); Fix any h1 -\u003e h3 jumps by using h2; Run Lighthouse accessibility audit; Verify heading-order audit passes. Feature file: features/accessibility.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:21Z","updated_at":"2026-01-19T16:30:21Z","labels":["accessibility"]}
{"id":"med-tracker-n6dl","title":"[OPS-001] Implement Release Please and Docker Build/Release Workflows","description":"Implement automated release management and Docker container builds:\n1. Add release-please workflow to manage versioning and changelogs.\n2. Build and push Docker containers to GitHub Container Registry (GHCR).\n3. Push beta releases to GHCR on branch updates.\n4. Push stable releases and containers to GHCR on new version tags.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-20T09:33:49Z","updated_at":"2026-01-20T09:34:20Z","closed_at":"2026-01-20T09:34:20Z","close_reason":"Closed via update","labels":["ci-cd","devops","docker"]}
{"id":"med-tracker-nen","title":"[ADMIN-023] Admin search and filter combined workflow","description":"Admin search and filter combined workflow. Feature file: features/admin.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:26Z","updated_at":"2026-01-19T16:30:26Z","labels":["admin"]}
{"id":"med-tracker-nqia","title":"Dosage shows 'ml' instead of 'mg' for medication takes on person show page","description":"On the person show page, the \"Today's Doses\" section shows dosage amounts with 'ml' unit (e.g., \"1000 ml\") when the prescription is for tablets measured in mg. This is a data display bug — the unit should match the medicine's actual dosage form.","acceptance_criteria":"- Dosage display shows correct unit matching the medicine's dosage form\n- Tests pass","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-05T21:26:27Z","updated_at":"2026-02-05T23:25:05Z","closed_at":"2026-02-05T23:25:05Z","close_reason":"Fixed in PR #421. Use prescription.dosage.unit instead of hardcoded ml.","labels":["data-display","quick-fix","ui"]}
{"id":"med-tracker-nz2f","title":"Medicine show page shows notice both as flash and inline alert (Double-Shout)","description":"The medicine show page renders the flash notice BOTH as a global flash banner AND as an inline alert within the page content. This is the Double-Shout anti-pattern from the UI professional skill. The notice appears twice on screen simultaneously.","acceptance_criteria":"- Flash notices appear only once on the medicine show page (global flash only, not duplicated inline)\n- Tests pass","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-05T21:25:58Z","updated_at":"2026-02-05T22:49:50Z","closed_at":"2026-02-05T22:49:50Z","close_reason":"Fixed in PR #414. Used flash.delete(:notice) to consume flash inline.","labels":["quick-fix","signal-to-noise","ui"]}
{"id":"med-tracker-o869","title":"StockBadge quantity text too small for accessibility","description":"Shared::StockBadge (stock_badge.rb:20) uses text-xs for quantity display. At 12px, this may be below WCAG 1.4.4 minimum text size for important information.\n\nLocation: app/components/shared/stock_badge.rb:20\n\nCurrent: class: 'text-xs text-slate-500 font-medium'\nRecommend: text-sm (14px) for better readability","acceptance_criteria":"- Quantity text uses text-sm for better readability\n- Maintains visual hierarchy with badge\n- WCAG 1.4.4 compliance\n- Tests pass","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:05:40Z","updated_at":"2026-02-06T23:51:12Z","closed_at":"2026-02-06T23:51:12Z","close_reason":"Changed StockBadge quantity text from text-xs to text-sm for better accessibility. Added regression test.","labels":["accessibility","quick-fix","ui"]}
{"id":"med-tracker-of3m","title":"Icon size inconsistency - numeric vs class-based sizing","description":"Icons use mixed sizing approaches:\n- Some use size: 16 or size: 20 (numeric)\n- Others use class: 'h-4 w-4' or 'h-5 w-5' (Tailwind classes)\n\nThis creates confusion and potential mismatches. Should standardize on one approach.\n\nExamples:\n- flash.rb:44 uses size: 16\n- bottom_nav.rb:23 uses class: 'h-5 w-5'\n- prescriptions/card.rb:59 uses size: 20","acceptance_criteria":"- Consistent icon sizing approach across codebase\n- Document preferred method in code style guide\n- All icons render at intended sizes\n- Tests pass","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-05T16:04:55Z","updated_at":"2026-02-05T16:04:55Z","labels":["consistency","refactor","ui"]}
{"id":"med-tracker-osc","title":"[E2E-004] Parent manages child's OTC medicine with daily limits","description":"Parent manages child's OTC medicine with daily limits. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:14Z","updated_at":"2026-01-19T16:31:14Z","labels":["e2e"]}
{"id":"med-tracker-ove","title":"[UI-013] Create shared component library for common patterns","description":"Create shared component library for common patterns. Feature file: features/ui_improvements.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:35:07Z","updated_at":"2026-01-19T16:35:07Z","labels":["ui-improvements"]}
{"id":"med-tracker-p47","title":"UI Improvements Features","description":"Turbo, mobile, cleanup. Feature file: features/ui_improvements.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:59Z","updated_at":"2026-01-19T16:29:59Z"}
{"id":"med-tracker-p60l","title":"Input component height doesn't match button height","description":"Input component (ruby_ui/input/input.rb:23) uses h-9 while Button :md uses h-9 min-h-[36px]. Input should also have min-h-[36px] for consistency and WCAG compliance.\n\nLocation: app/components/ruby_ui/input/input.rb:23\n\nThis affects forms where inputs and buttons appear together - they should have matching heights.","acceptance_criteria":"- Input component includes min-h-[36px] to match Button :md\n- Forms have consistent input/button heights\n- WCAG 2.5.8 compliance maintained\n- Tests pass","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:05:28Z","updated_at":"2026-02-06T23:53:24Z","closed_at":"2026-02-06T23:53:24Z","close_reason":"Added min-h-[36px] to Input component to match Button :md height. Added Input component spec.","labels":["accessibility","consistency","quick-fix","ui"]}
{"id":"med-tracker-pev1","title":"DashboardController double-queries scoped_people","description":"DashboardController#scoped_prescriptions calls scoped_people.pluck(:id) which re-executes the query even though scoped_people was already loaded into the people variable. Should use people.map(\u0026:id) or pass the already-loaded collection.","status":"closed","priority":3,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-11T13:38:39Z","created_by":"Dan Webb","updated_at":"2026-02-19T23:41:46Z","closed_at":"2026-02-19T23:41:46Z","close_reason":"Already implemented: DashboardController query optimized to use subqueries instead of pluck, avoiding double execution.","labels":["controllers","performance"]}
{"id":"med-tracker-pey","title":"[SEC-CSP-001] Fix CSP violations for inline styles","description":"Fix CSP violations for inline styles. Feature file: features/security.json","notes":"SEC-CSP-001 COMPLETED ✅\n\nBranch pushed: fix/csp-inline-style-violations\n\nPR ready for creation at: https://github.com/damacus/med-tracker/pull/new/fix/csp-inline-style-violations\n\nAll CSP inline style violations have been fixed:\n- RubyUI components updated to use CSS classes instead of inline styles\n- People::FormView conditional display logic updated\n- CSP compliance test added and passing\n- Changes committed and pushed to remote branch\n\nThe GitHub MCP integration lacks permissions to auto-create the PR, but the branch is ready for manual PR creation or review.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:32:18Z","updated_at":"2026-02-17T23:32:40Z","closed_at":"2026-02-17T23:26:40Z","close_reason":"Fixed all CSP violations by replacing inline styles with CSS classes in RubyUI components and People::FormView. Added test to verify compliance.","labels":["security"]}
{"id":"med-tracker-pia","title":"[INVITE-003] Invitation expires after set time","description":"Invitation expires after set time. Feature file: features/invitations.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:41Z","updated_at":"2026-01-19T16:30:41Z","labels":["invitations"]}
{"id":"med-tracker-pq6","title":"[MLKP-018] Offline mode with cached data","description":"Offline mode with cached data. Feature file: features/medicine_lookup.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:33:42Z","updated_at":"2026-01-19T16:33:42Z","labels":["medicine-lookup"]}
{"id":"med-tracker-ps8t","title":"Desktop nav links missing min-height for touch targets (WCAG 2.5.8)","description":"DesktopNav links have no min-h-[44px] unlike BottomNav which correctly has it. Desktop links should also meet WCAG 2.5.8 minimum target size of 24x24px (44px recommended).","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-09T17:37:05Z","updated_at":"2026-02-09T18:00:15Z","closed_at":"2026-02-09T18:00:15Z","close_reason":"Fixed in PR #435 - added min-h-[24px] to .nav__link CSS class","labels":["accessibility","quick-fix","ui","wcag"]}
{"id":"med-tracker-pte","title":"[OIDC-SEC-003] OIDC audience claim validation prevents token misuse","description":"OIDC audience claim validation prevents token misuse. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:33:56Z","updated_at":"2026-02-17T23:13:40Z","closed_at":"2026-02-17T23:13:40Z","close_reason":"Completed - OIDC audience claim validation implemented via client identifier configuration and openid_connect gem validation. Tests added and passing.","labels":["oidc","security"]}
{"id":"med-tracker-q12q","title":"Split partially-convertible Playwright specs into JS/non-JS contexts","description":"Category C from the Playwright-to-rack_test conversion plan. Two files have mixed JS/non-JS tests that could be split:\n\n1. spec/features/profiles/two_factor_management_spec.rb (15 tests) - accept_confirm needs JS, most others don't\n2. spec/features/prescriptions/prescription_card_spec.rb (24 tests) - Turbo form submission may need JS, display checks don't\n\nAction: Split JS-dependent tests into separate context blocks; convert the rest to rack_test.\n\nSee: .windsurf/plans/convert-playwright-to-rspec-35bb0e.md","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-12T14:11:52Z","updated_at":"2026-02-12T14:11:52Z","labels":["refactor","testing"]}
{"id":"med-tracker-q1r","title":"[A11Y-008] Error messages announced to screen readers","description":"Submit form with errors; Verify aria-live region or role=alert; Verify errors announced. Feature file: features/accessibility.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:16Z","updated_at":"2026-01-19T16:30:16Z","labels":["accessibility"]}
{"id":"med-tracker-q3fj","title":"Flash component adds redundant \"Success\"/\"Error\" titles","description":"Flash component (layouts/flash.rb:27,37) adds generic AlertTitle \"Success\" and \"Error\" before the actual message. This violates signal-to-noise ratio principle - the titles are redundant with the visual styling (green/red colors, icons) and reduce clarity.\n\nExample: Shows \"Success\" + \"Medicine added successfully\" when just \"Medicine added successfully\" is clearer.\n\nLocation: app/components/layouts/flash.rb lines 27 and 37","acceptance_criteria":"- Remove AlertTitle from both notice and alert\n- Messages display directly without redundant titles\n- Visual styling (colors, icons) still conveys severity\n- Tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T16:04:35Z","updated_at":"2026-02-05T20:41:09Z","closed_at":"2026-02-05T20:41:09Z","close_reason":"Removed redundant AlertTitle elements from Flash component. Tests pass, pushed to fix/flash-remove-redundant-titles branch.","labels":["quick-fix","signal-to-noise","ui"]}
{"id":"med-tracker-qb6","title":"[SCAN-001] Implement Barcode Scanner UI Component","description":"Implement the frontend component for barcode scanning using a mobile-friendly library. This should handle camera permissions and provide a real-time scanning interface.","acceptance_criteria":"- Integration with a barcode scanning library (e.g., QuaggaJS or ZXing)\n- Camera access request and handling\n- Real-time barcode detection UI overlay\n- Success/Failure feedback in the UI","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:39:43Z","updated_at":"2026-01-19T16:39:43Z","labels":["frontend","scanning"],"dependencies":[{"issue_id":"med-tracker-qb6","depends_on_id":"med-tracker-514","type":"blocks","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-qmph","title":"Mobile menu duplicates bottom nav quick-access buttons","description":"The slide-out hamburger menu shows Medicines, People, Profile links which are already present in the bottom navigation bar (Home, Medicines, People, Profile). The menu should only contain items NOT in the bottom nav — e.g. Medicine Finder, Administration, Logout. Remove Home/Medicines/People/Profile from the slide-out menu or remove them from the bottom bar to avoid duplication.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-09T23:13:29Z","updated_at":"2026-02-09T23:56:33Z","closed_at":"2026-02-09T23:56:33Z","close_reason":"Fixed: Removed duplicated Medicines/People/Profile from mobile menu drawer","labels":["mobile","navigation","ui"],"dependencies":[{"issue_id":"med-tracker-qmph","depends_on_id":"med-tracker-3j9m","type":"parent-child","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-r0r4","title":"Dashboard quick actions use raw CSS instead of RubyUI components","description":"Dashboard::IndexView#render_quick_actions uses hand-rolled button_primary_classes/button_secondary_classes methods that duplicate RubyUI::Button/Link component logic. Should use the component system for consistency and maintainability.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-09T17:37:00Z","updated_at":"2026-02-09T17:56:00Z","closed_at":"2026-02-09T17:56:00Z","close_reason":"Fixed in PR #433 - replaced raw CSS with RubyUI Link variants, removed dead helper methods","labels":["consistency","quick-fix","ui"]}
{"id":"med-tracker-r0s","title":"[UI-005] Implement mobile-friendly navigation","description":"Implement mobile-friendly navigation. Feature file: features/ui_improvements.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:34:47Z","updated_at":"2026-01-30T23:38:36Z","closed_at":"2026-01-30T23:38:36Z","close_reason":"Implemented mobile-friendly navigation with active state indicators, improved touch targets (44-48px), aria-current attributes, and better mobile UX","labels":["ui-improvements"]}
{"id":"med-tracker-rl1a","title":"Add Mailpit email sandbox to dev Docker Compose","description":"Adds axllent/mailpit container to compose.yaml dev profile so devs can see outbound emails. Configures development.rb SMTP to route to mailpit:1025. Part of issue #510.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-23T10:36:40Z","created_by":"Dan Webb","updated_at":"2026-02-23T10:39:59Z","closed_at":"2026-02-23T10:39:59Z","close_reason":"Added mailpit to dev profile (8025) and mailpit-test to test profile (8026). Dev SMTP configured to mailpit:1025."}
{"id":"med-tracker-ro0","title":"[PERF-003] No N+1 queries on dashboard","description":"No N+1 queries on dashboard. Feature file: features/performance.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:40Z","updated_at":"2026-01-19T16:31:40Z","labels":["performance"]}
{"id":"med-tracker-ro1","title":"[UI-011] Maximize RubyUI component usage","description":"Maximize RubyUI component usage. Feature file: features/ui_improvements.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:35:03Z","updated_at":"2026-02-21T23:06:29Z","closed_at":"2026-02-21T23:06:29Z","close_reason":"Completed in PR #507. Standardized RubyUI component usage across forms and cleaned up redundant CSS.","labels":["ui-improvements"]}
{"id":"med-tracker-ry5","title":"[OTEL-014] Sensitive data scrubbed from traces","description":"Sensitive data scrubbed from traces. Feature file: features/observability.json","status":"closed","priority":1,"issue_type":"task","assignee":"cascade","created_at":"2026-01-19T16:32:05Z","updated_at":"2026-02-09T21:35:08Z","closed_at":"2026-02-09T21:35:08Z","close_reason":"Implemented SpanSanitizer and SpanSanitizingProcessor to scrub PII from traces. Changed PG db_statement to :obfuscate. 34 tests added. PR created.","labels":["observability"]}
{"id":"med-tracker-smz","title":"[MLKP-002] Search medicines from BNF","description":"Search medicines from BNF. Feature file: features/medicine_lookup.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:08Z","updated_at":"2026-01-19T16:33:08Z","labels":["medicine-lookup"]}
{"id":"med-tracker-sv6","title":"[UI-012] Remove unused files and dead code","description":"Remove unused files and dead code. Feature file: features/ui_improvements.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:35:05Z","updated_at":"2026-02-21T23:06:24Z","closed_at":"2026-02-21T23:06:24Z","close_reason":"Completed in PR #507. Removed hello_controller.js and redundant application.css","labels":["ui-improvements"]}
{"id":"med-tracker-swuf","title":"Refactor: Extract Components::Admin::Users::IndexView into smaller Phlex components","description":"Components::Admin::Users::IndexView is ~344 lines and mixes header, search form, table rendering, and pagination. Extract focused subcomponents (e.g., SearchForm, UsersTable, Pagination) without changing HTML output.","acceptance_criteria":"- Index view is decomposed into smaller components\n- No behavioral/UI output change\n- Existing tests pass\n- New/updated view/component specs cover key rendering paths","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-02T17:06:15Z","created_by":"Dan Webb","updated_at":"2026-02-19T23:21:41Z","closed_at":"2026-02-19T23:21:41Z","close_reason":"IndexView has been decomposed into SearchForm, UsersTable, Pagination, UserRow","labels":["phlex","refactor","ui"]}
{"id":"med-tracker-taqk","title":"Security: Remove WebAuthnService and use Rodauth's built-in challenge storage","description":"WebAuthnService stores challenges in Rails.cache which is vulnerable to race conditions and cache eviction. Rodauth provides battle-tested session-based challenge storage. Delete app/services/web_authn_service.rb and rely on Rodauth's webauthn feature exclusively.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-28T10:14:07Z","updated_at":"2026-01-28T10:18:55Z","closed_at":"2026-01-28T10:18:55Z","close_reason":"Removed WebAuthnService and using Rodauth's built-in WebAuthn exclusively","labels":["refactor","security","webauthn"]}
{"id":"med-tracker-tdkl","title":"Inconsistent gap spacing in card footers","description":"Card footers use inconsistent gap values:\n- PersonMedicines::Card:46 uses gap-2\n- Prescriptions::Card:52 uses gap-2  \n- People::PersonCard:81 uses gap-2\n- Medicines::ShowView:142 uses gap-3\n\nThis creates subtle visual inconsistency. Should standardize on one value (recommend gap-2 for tighter grouping per proximity principle).\n\nLocations across multiple card components","acceptance_criteria":"- All card footers use consistent gap-2 spacing\n- Visual rhythm is uniform across cards\n- Tests pass","status":"closed","priority":2,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:04:46Z","updated_at":"2026-02-06T23:45:46Z","closed_at":"2026-02-06T23:45:46Z","close_reason":"Standardized gap-3 to gap-2 in Medicines::ShowView actions for consistency with all other card footers.","labels":["consistency","quick-fix","spacing","ui"]}
{"id":"med-tracker-tgmt","title":"2FA setup notice uses Success (green) variant instead of informational","description":"The \"For enhanced security, please set up two-factor authentication\" notice is displayed using the Success (green) flash variant. This is a security recommendation, not a success confirmation. Using success styling for a recommendation is the Boy Who Cried Wolf anti-pattern — it trains users to ignore success messages and mismatches expectations.","acceptance_criteria":"- 2FA setup notice uses an appropriate variant (not success/green)\n- Actual success messages remain green\n- Tests pass","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-05T21:26:02Z","updated_at":"2026-02-05T22:54:13Z","closed_at":"2026-02-05T22:54:13Z","close_reason":"Fixed in PR #415. Changed 2FA notice to warning variant.","labels":["feedback","quick-fix","ui"]}
{"id":"med-tracker-thi","title":"[OIDC-SEC-005] OIDC state parameter prevents CSRF attacks","description":"OIDC state parameter prevents CSRF attacks. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:00Z","updated_at":"2026-02-17T23:13:41Z","closed_at":"2026-02-17T23:13:41Z","close_reason":"Completed - OIDC state parameter prevents CSRF attacks implemented via omniauth feature providing state parameter. Tests passing.","labels":["oidc","security"]}
{"id":"med-tracker-thvl","title":"Dosage format inconsistency - missing space between amount and unit","description":"PrescriptionHelpers#format_dosage outputs '500mg' (no space) while PersonMedicines::Card#medicine_description outputs '500 mg' (with space). Inconsistent data display formatting.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-09T17:37:03Z","updated_at":"2026-02-09T17:45:46Z","closed_at":"2026-02-09T17:45:46Z","close_reason":"Fixed in PR #430 - added space between dosage amount and unit","labels":["consistency","data-display","quick-fix","ui"]}
{"id":"med-tracker-tx1","title":"[PASSKEY-009] Passkey discoverable credentials: Passkeys work without username","description":"Passkey discoverable credentials: Passkeys work without username. Feature file: features/authentication.json","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-19T16:33:02Z","updated_at":"2026-02-20T23:41:48Z","labels":["authentication","passkey"]}
{"id":"med-tracker-u2c0","title":"Prescription card Delete button same prominence as Take on person show page","description":"On the person show page, prescription cards show Take, Edit, and Delete buttons. Delete uses destructive red styling with equal size to the Take button. The primary action (Take) should dominate visually; Delete should be subordinate to prevent accidental destructive actions.","acceptance_criteria":"- Take button is the most visually prominent action\n- Delete button uses a less prominent style (outline or smaller)\n- Tests pass","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-05T21:26:24Z","updated_at":"2026-02-05T23:26:56Z","closed_at":"2026-02-05T23:26:56Z","close_reason":"Fixed in PR #422. Delete trigger uses outline variant with subtle red text.","labels":["quick-fix","ui","visual-hierarchy"]}
{"id":"med-tracker-u3e","title":"[UI-021] Consolidate and clean up CSS","description":"Consolidate and clean up CSS. Feature file: features/ui_improvements.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:35:26Z","updated_at":"2026-01-19T16:35:26Z","labels":["ui-improvements"]}
{"id":"med-tracker-u4f","title":"[PERF-006] JavaScript is minified in production","description":"JavaScript is minified in production. Feature file: features/performance.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:49Z","updated_at":"2026-01-19T23:07:49Z","closed_at":"2026-01-19T23:07:49Z","close_reason":"Verified: Propshaft + importmap-rails architecture with pre-minified vendor JS and Thruster compression. Updated features/performance.json to reflect the no-build architecture.","labels":["performance"]}
{"id":"med-tracker-u65","title":"Accessibility Features","description":"WCAG compliance, screen reader support, keyboard navigation. Feature file: features/accessibility.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:12Z","updated_at":"2026-01-19T16:29:12Z"}
{"id":"med-tracker-ubvz","title":"Back button on person medication screen produces content missing error","description":"On the person show page (`/people/:id`), clicking the \"Back\" link produces a \"Content missing\" error. The Back link at line 103 of `app/components/people/show_view.rb` links to `people_path` with `variant: :outline` but is inside a `turbo_frame_tag \"person_#{person.id}\"` block, so Turbo tries to find a matching frame on the people index page and fails.\n\nFix: Add `data: { turbo_frame: '_top' }` to the Back link so it performs a full navigation instead of a frame replacement.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-09T23:13:54Z","updated_at":"2026-02-09T23:56:32Z","closed_at":"2026-02-09T23:56:32Z","close_reason":"Fixed: Added turbo_frame: '_top' to Back link in People::ShowView","labels":["navigation","turbo","ui"],"dependencies":[{"issue_id":"med-tracker-ubvz","depends_on_id":"med-tracker-3j9m","type":"parent-child","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-ufo","title":"[PRESC-011] Complete prescription creation with all fields","description":"Complete prescription creation with all fields. Feature file: features/prescriptions.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:51Z","updated_at":"2026-01-19T16:30:51Z","labels":["prescriptions"]}
{"id":"med-tracker-um9","title":"[PROFILE-008] User can delete own account (soft delete)","description":"User can delete own account (soft delete). Feature file: features/profile.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:31:02Z","updated_at":"2026-01-19T16:31:02Z","labels":["profile"]}
{"id":"med-tracker-un80","title":"Delete button has equal visual weight to Take Now on dashboard","description":"On the dashboard medication schedule, the Delete button (red/destructive) has equal or greater visual prominence than the Take Now button (green/primary). Delete is a rare, destructive action while Take Now is the primary workflow action. Per visual hierarchy principles, the primary action should have the strongest visual weight and destructive actions should be visually subordinate.","acceptance_criteria":"- Take Now button is visually more prominent than Delete\n- Delete button uses a less prominent style (e.g., outline or ghost variant)\n- Tests pass","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-05T21:26:10Z","updated_at":"2026-02-05T23:02:28Z","closed_at":"2026-02-05T23:02:28Z","close_reason":"Fixed in PR #417. Delete button now uses ghost style.","labels":["quick-fix","ui","visual-hierarchy"]}
{"id":"med-tracker-urn","title":"Dose Tracking Features","description":"Recording takes, timing restrictions, history. Feature file: features/dose_tracking.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:29Z","updated_at":"2026-01-19T16:29:29Z"}
{"id":"med-tracker-us1","title":"[UI-007] Remove duplicate action buttons","description":"Remove duplicate action buttons. Feature file: features/ui_improvements.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:34:52Z","updated_at":"2026-01-19T16:34:52Z","labels":["ui-improvements"]}
{"id":"med-tracker-uvqw","title":"Person show page: Add Medicine dialog does not dismiss; Cancel does not close","description":"User journey (as jane.doe, parent):\n1. Click People\n2. Click \"View Prescriptions\" for Jane Doe\n3. Click \"Add Medicine\" — dialog opens\n4. BUG: Submitting the form does not dismiss the dialog\n5. BUG: Clicking \"Cancel\" does not close the dialog\n\nRoot cause likely in `Components::PersonMedicines::Modal` — the Cancel link uses `data: { turbo_frame: 'person_medicine_modal' }` but may not properly clear the turbo frame. The form submission turbo_stream response may also not be correctly removing the modal frame.\n\nFiles:\n- `app/components/person_medicines/modal.rb` (Cancel link, line 56-58)\n- `app/controllers/person_medicines_controller.rb` (turbo_stream responses)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-09T23:13:49Z","updated_at":"2026-02-09T23:56:34Z","closed_at":"2026-02-09T23:56:34Z","close_reason":"Fixed: Cancel button now uses dialog dismiss action instead of turbo frame link","labels":["dialog","turbo","ui"],"dependencies":[{"issue_id":"med-tracker-uvqw","depends_on_id":"med-tracker-3j9m","type":"parent-child","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-uxji","title":"SearchForm missing select_classes method definition","description":"Admin::Users::SearchForm (search_form.rb:49, 63) calls select_classes method that isn't defined in the component. This will cause a runtime error.\n\nLocation: app/components/admin/users/search_form.rb:49, 63\n\nNeed to add select_classes method or use Input component for consistency.","acceptance_criteria":"- select_classes method is defined or replaced with proper component\n- Search form renders without errors\n- Selects have consistent styling\n- Tests pass","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-05T16:05:32Z","updated_at":"2026-02-11T13:43:55Z","closed_at":"2026-02-11T13:43:55Z","close_reason":"SearchForm spec proves select_classes method is available via FormHelpers included in Base. Bug was invalid - method exists. Added comprehensive SearchForm tests confirming rendering works without errors.","labels":["bug","quick-fix","ui"]}
{"id":"med-tracker-v0dz","title":"PersonCard 'Needs Carer' badge uses inline styles instead of Badge component","description":"The PersonCard render_needs_carer_badge method defines badge classes inline instead of using the RubyUI::Badge component. This violates DRY and creates inconsistency with other badges in the system. If badge styling changes, this badge won't update.","acceptance_criteria":"- Needs Carer badge uses RubyUI::Badge component with appropriate variant\n- Visual appearance is consistent with other badges\n- Tests pass","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-02-05T21:26:20Z","updated_at":"2026-02-05T23:14:34Z","closed_at":"2026-02-05T23:14:34Z","close_reason":"Fixed in PR #420. Replaced inline styles with RubyUI::Badge warning variant.","labels":["consistency","quick-fix","ui"]}
{"id":"med-tracker-v0x6","title":"Disable public sign-up — invitation-only registration [SEC]","description":"Prevent unauthenticated users from reaching the create-account page when an administrator already exists. New users must be invited by an administrator.\n\n**Current state:** `before_create_account` already blocks submission without a valid token, but the sign-up page is still publicly reachable.\n\n**Approach:**\n- Add `before_create_account_route` hook in `rodauth_main.rb` that redirects to login with a flash notice when `User.administrator.exists?` and no valid `invitation_token` param is present\n- Hide the \"Sign up\" link from the login page Phlex view when registration is locked down\n- Add a feature spec covering the redirect behaviour","acceptance_criteria":"- Visiting /create-account without an invitation token redirects to login when an admin exists\n- Sign-up link is hidden on the login page when an admin exists\n- Visiting /create-account with a valid invitation token still works\n- Feature spec passes","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-18T11:19:23Z","created_by":"Dan Webb","updated_at":"2026-02-18T11:41:31Z","closed_at":"2026-02-18T11:41:31Z","close_reason":"Implemented: before_create_account_route redirect in rodauth_main.rb, Create Account link hidden in login.rb when admin exists. 13 specs passing (5 new + 8 existing signup specs).","labels":["security"]}
{"id":"med-tracker-v2f4","title":"Alert component padding inconsistency with notice boxes","description":"Different padding patterns for informational boxes:\n- Alert component (ruby_ui/alert/alert.rb:31) uses px-4 py-4\n- PersonMedicines timing restrictions (card.rb:75) uses p-3\n- Prescriptions notes (card.rb:84) uses p-3\n- Countdown notices use p-3\n\nShould standardize padding for similar UI elements per proximity principle.\n\nLocations across multiple components","acceptance_criteria":"- Consistent padding for similar informational boxes\n- Visual consistency across notice patterns\n- Tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-05T16:05:20Z","updated_at":"2026-02-09T18:06:41Z","closed_at":"2026-02-09T18:06:41Z","close_reason":"Not a bug - all inline card notice boxes (notes, timing restrictions, countdown) consistently use p-3. The RubyUI Alert component uses px-4 py-4 but is a different UI pattern (standalone alerts vs inline card notices). Padding difference is semantically appropriate.","labels":["consistency","spacing","ui"]}
{"id":"med-tracker-v46","title":"[OIDC-SEC-002] OIDC token expiration prevents replay attacks","description":"OIDC token expiration prevents replay attacks. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:33:54Z","updated_at":"2026-02-17T23:13:42Z","closed_at":"2026-02-17T23:13:42Z","close_reason":"Completed - OIDC token expiration prevents replay attacks implemented via openid_connect gem automatic validation and no long-term token storage. Tests added and passing.","labels":["oidc","security"]}
{"id":"med-tracker-v6g","title":"End-to-End Workflow Features","description":"Complete user journeys, multi-step workflows. Feature file: features/e2e.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:31Z","updated_at":"2026-01-19T16:29:31Z"}
{"id":"med-tracker-vh28","title":"[SCAN-004] Testing and Error Handling for Scanning Flow","description":"Ensure the scanning feature is robust with comprehensive testing and clear error handling for various failure states.","acceptance_criteria":"- System specs covering the scanning flow (using mocked scanner inputs)\n- Unit tests for barcode resolution service\n- Error handling for 'medicine not found' or 'invalid barcode' scenarios","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:39:44Z","updated_at":"2026-01-19T16:39:44Z","labels":["quality-assurance","testing"],"dependencies":[{"issue_id":"med-tracker-vh28","depends_on_id":"med-tracker-514","type":"blocks","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-vi7k","title":"Parents should be authorized to add medicines to the system","description":"Currently `MedicinePolicy#create?` only allows `admin? || doctor?`. Parents should also be able to add medicines (OTC/supplements) to the global medicine list, or at minimum add PersonMedicines for their dependents. Review and update `MedicinePolicy` and/or `PersonMedicinePolicy` to grant appropriate create permissions to parent role users.\n\nCurrent policy:\n- `MedicinePolicy#create?` → `admin? || doctor?`\n- `PersonMedicinePolicy#create?` → `admin? || self_or_dependent?`\n\nThe `self_or_dependent?` check in PersonMedicinePolicy doesn't account for parent→minor relationships, only self. Parents viewing their child's page should be able to add person medicines.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-09T23:13:43Z","updated_at":"2026-02-09T23:56:36Z","closed_at":"2026-02-09T23:56:36Z","close_reason":"Fixed: Added parent_with_minor? to PersonMedicinePolicy create/update/destroy","labels":["authorization","parent-role"],"dependencies":[{"issue_id":"med-tracker-vi7k","depends_on_id":"med-tracker-3j9m","type":"parent-child","created_at":"2026-02-17T10:53:29Z","created_by":"bootstrap","metadata":"{}"}]}
{"id":"med-tracker-wbqf","title":"Show medicine quantity column on dashboard Medication Schedule","description":"The dashboard Medication Schedule table should display the quantity of each medicine as a visible column, similar to how Dosage, Frequency, and End Date are shown. Currently the quantity is only shown as a small \"Qty: 44\" label under the stock badge — it should be promoted to its own column for better visibility.","acceptance_criteria":"- Quantity column is visible in the Medication Schedule table on the dashboard\\n- Column is positioned consistently with other data columns (Dosage, Frequency, End Date)\\n- Quantity value is clearly readable\\n- Existing tests updated/added to cover the new column","status":"closed","priority":2,"issue_type":"feature","assignee":"cascade","created_at":"2026-02-11T10:54:01Z","updated_at":"2026-02-11T11:04:07Z","closed_at":"2026-02-11T11:04:07Z","close_reason":"Implemented Quantity column in dashboard desktop table and mobile card view. 529 tests pass, 0 failures, RuboCop clean.","labels":["dashboard","ui"]}
{"id":"med-tracker-wj8","title":"[UI-009] Minimize full page reloads using Turbo Frames and Streams","description":"Minimize full page reloads using Turbo Frames and Streams. Feature file: features/ui_improvements.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:34:59Z","updated_at":"2026-01-19T16:34:59Z","labels":["ui-improvements"]}
{"id":"med-tracker-x1ev","title":"Clean up pre-existing skeleton Minitest files","description":"The test/ directory contains several pre-existing skeleton/scaffold files that need attention:\n\n- `test/models/person_test.rb`, `prescription_test.rb`, `medication_take_test.rb` — empty stubs\n- `test/system/playwright/` — 9 Playwright system tests that duplicate RSpec system specs\n- `test/system/medicines_test.rb` — standalone system test\n\nDecision needed: either migrate these properly from RSpec equivalents or remove the stubs to avoid confusion during the Minitest migration.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-02-12T14:41:20Z","updated_at":"2026-02-12T14:52:08Z","closed_at":"2026-02-12T14:52:08Z","close_reason":"Skeleton files will be replaced as part of model spec migration in this session; Playwright duplicates addressed separately","labels":["minitest-migration","tech-debt","testing"]}
{"id":"med-tracker-xag","title":"Person Medicines Features","description":"OTC medicine tracking, supplements. Feature file: features/person_medicines.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:48Z","updated_at":"2026-01-19T16:29:48Z"}
{"id":"med-tracker-xat","title":"Medicines Features","description":"Medicine CRUD, catalog management. Feature file: features/medicines.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:37Z","updated_at":"2026-01-19T16:29:37Z"}
{"id":"med-tracker-xml4","title":"Add tests for extracted Phlex components","description":"New Phlex components were extracted from large view components and need test coverage:\n\nDashboard components:\n- Components::Dashboard::StatCard\n- Components::Dashboard::PrescriptionCard\n- Components::Dashboard::PrescriptionRow\n- Components::Dashboard::DeleteConfirmationDialog\n\nAdmin::Users components:\n- Components::Admin::Users::SearchForm\n- Components::Admin::Users::UsersTable\n- Components::Admin::Users::UserRow\n- Components::Admin::Users::Pagination\n\nLayouts components:\n- Components::Layouts::MobileMenu\n- Components::Layouts::DesktopNav\n- Components::Layouts::BottomNav\n- Components::Layouts::ProfileMenu\n\nEach component should have unit tests verifying:\n1. Correct HTML structure\n2. Proper data display\n3. Conditional rendering logic\n4. Accessibility attributes","status":"closed","priority":1,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-02T17:11:32Z","created_by":"Dan Webb","updated_at":"2026-02-11T13:43:57Z","closed_at":"2026-02-11T13:43:57Z","close_reason":"Added unit tests for all 8 extracted Phlex components: SearchForm, UsersTable, Pagination, StatCard, PrescriptionCard, DeleteConfirmationDialog, MobileMenu, ProfileMenu. Tests cover HTML structure, data display, conditional rendering, and accessibility attributes.","labels":["components","phlex","testing"]}
{"id":"med-tracker-y0rg","title":"Refactor PrescriptionsController response handling","description":"The PrescriptionsController has long create/update methods (38-39 lines each) that exceed Sandi Metz's 5-line method rule.\n\nThe Turbo Stream response patterns are duplicated between create and update actions.\n\nConsider:\n1. Extract success/failure response handling into private methods\n2. Create a TurboResponder or response builder for shared patterns\n3. Use Rails responders gem if appropriate\n\nThis would reduce method complexity and improve maintainability.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-02T17:11:28Z","created_by":"Dan Webb","updated_at":"2026-02-02T17:11:28Z","labels":["controllers","refactoring","sandi-metz"]}
{"id":"med-tracker-y9d4","title":"Notes styling inconsistent between Prescriptions and PersonMedicines cards","description":"PersonMedicines::Card#render_notes uses bg-blue-50/border-blue-200 (blue), while Prescriptions::Card#render_notes uses bg-amber-50/border-amber-200 (amber). Same semantic element (notes) should have consistent visual treatment.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-09T17:37:01Z","updated_at":"2026-02-09T17:56:22Z","closed_at":"2026-02-09T17:56:22Z","close_reason":"Already fixed in PR #431 (fix/countdown-notice-styling) - Prescriptions::Card notes restored to blue to match PersonMedicines::Card","labels":["consistency","quick-fix","ui"]}
{"id":"med-tracker-yafx","title":"Seed medicines from a data file","description":"Extract medicine seed data into a standalone `db/seeds/medicines.yml` file (plain YAML, no ERB) and add idempotent upsert logic that runs in all environments including production.\n\n**Approach:**\n- Create `db/seeds/medicines.yml` with the medicine catalogue (name, dosage_amount, dosage_unit, description, warnings, stock defaults)\n- Add `db/seeds/seed_medicines.rb` with idempotent `find_or_create_by!(name:)` + `update!` logic\n- Update `db/seeds.rb` to load medicines in all environments (not just `Rails.env.local?`)\n- Add `task dev:seed-medicines` and `task prod:seed-medicines` Taskfile tasks","acceptance_criteria":"- `rails db:seed` in production seeds medicines without error\n- Re-running is idempotent (no duplicates)\n- Dev fixture medicines still load via existing fixture path\n- New task `task dev:seed-medicines` works","status":"closed","priority":2,"issue_type":"chore","owner":"dan.webb@damacus.io","created_at":"2026-02-18T11:19:14Z","created_by":"Dan Webb","updated_at":"2026-02-18T11:41:26Z","closed_at":"2026-02-18T11:41:26Z","close_reason":"Implemented: db/seeds/medicines.yml + seed_medicines.rb, loaded in all environments via db/seeds.rb. Tasks task dev:seed-medicines and task prod:seed-medicines added."}
{"id":"med-tracker-yb4","title":"[UI-006] Prioritize quick actions and summary info at page headers","description":"Prioritize quick actions and summary info at page headers. Feature file: features/ui_improvements.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:34:50Z","updated_at":"2026-01-30T23:38:41Z","closed_at":"2026-01-30T23:38:41Z","close_reason":"Implemented PageHeader component that prioritizes quick actions for mobile with sticky positioning, updated dashboard, medicines, and people views to show actions first on mobile","labels":["ui-improvements"]}
{"id":"med-tracker-ygj","title":"[PASSKEY-002] Passkey registration: User can register a passkey during account creation","description":"Passkey registration: User can register a passkey during account creation. Feature file: features/authentication.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:44Z","updated_at":"2026-01-26T21:35:35Z","closed_at":"2026-01-26T21:35:35Z","close_reason":"Implemented passkey management UI on profile page with tests","labels":["authentication","passkey"]}
{"id":"med-tracker-yoc4","title":"Add guard clauses in DashboardPresenter for missing current_user.person","description":"DashboardPresenter assumes `current_user.person` exists in role-based branches (`carer_patients`, `parent_minor_patients`, `own_person`). Add early-return guard clauses to avoid relying on database integrity exceptions and prevent nil dereference paths.","acceptance_criteria":"- Presenter returns an empty relation (`Person.none`) when user is nil or has no associated person where required\n- No `NoMethodError` path from `current_user.person` access\n- Add presenter specs for nil/absent person handling (or equivalent defensive behavior)\n- Keep behavior unchanged for valid users","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-17T09:14:56Z","created_by":"Dan Webb","updated_at":"2026-02-18T10:36:40Z","closed_at":"2026-02-18T10:36:40Z","close_reason":"Closed"}
{"id":"med-tracker-yqu","title":"[OIDC-001] OIDC configuration: Verify Google OAuth 2.0 configured as OIDC provider","description":"OIDC configuration: Verify Google OAuth 2.0 configured as OIDC provider. Feature file: features/authentication.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:21Z","updated_at":"2026-02-17T23:19:47Z","closed_at":"2026-02-17T23:19:47Z","close_reason":"Replaced by generic OAuth implementation","labels":["authentication","oidc"]}
{"id":"med-tracker-ywdg","title":"Inconsistent mb-2 spacing on card header icons","description":"Card header icons have inconsistent bottom margin:\n- PersonMedicines::Card:60 has mb-2\n- Prescriptions::Card:58 has mb-2\n- People::PersonCard:37 has mb-2\n- Dashboard::StatCard:35 has NO mb-2\n\nThis creates subtle alignment inconsistency. Should standardize.\n\nLocations across card components","acceptance_criteria":"- All card header icons use consistent spacing (recommend mb-2)\n- Visual rhythm is uniform\n- Tests pass","status":"closed","priority":3,"issue_type":"task","assignee":"cascade","created_at":"2026-02-05T16:05:17Z","updated_at":"2026-02-06T23:37:31Z","closed_at":"2026-02-06T23:37:31Z","close_reason":"All cards with standalone header icons (PersonMedicines::Card, Prescriptions::Card, PersonCard) already use consistent mb-2. StatCard uses a different layout pattern (icon inline with title in flex row) where mb-2 is not applicable.","labels":["consistency","quick-fix","spacing","ui"]}
{"id":"med-tracker-yxy","title":"Internationalization Features","description":"Multi-language support, locale handling. Feature file: features/i18n.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T16:29:32Z","updated_at":"2026-01-19T16:29:32Z"}
{"id":"med-tracker-z4r","title":"[PASSKEY-SEC-002] WebAuthn challenge prevents replay attacks","description":"WebAuthn challenge prevents replay attacks. Feature file: features/security.json","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T16:34:22Z","updated_at":"2026-01-26T21:35:37Z","closed_at":"2026-01-26T21:35:37Z","close_reason":"Verified with tests: unique challenges, expiration, rejection without valid challenge","labels":["passkey","security"]}
{"id":"med-tracker-zcz","title":"[UI-014] Implement swipe gestures for mobile actions","description":"Implement swipe gestures for mobile actions. Feature file: features/ui_improvements.json","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T16:35:09Z","updated_at":"2026-01-19T16:35:09Z","labels":["ui-improvements"]}
{"id":"med-tracker-zlu","title":"[OTEL-009] Custom metrics for medication takes","description":"Custom metrics for medication takes. Feature file: features/observability.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:31:59Z","updated_at":"2026-01-19T16:31:59Z","labels":["observability"]}
{"id":"med-tracker-zlx","title":"[PM-012] Person medicine edit and delete workflow","description":"Person medicine edit and delete workflow. Feature file: features/person_medicines.json","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T16:30:49Z","updated_at":"2026-01-19T16:30:49Z","labels":["person-medicines"]}
{"id":"med-tracker-zuv","title":"[OIDC-003] OIDC userinfo endpoint: Verify profile data retrieval","description":"OIDC userinfo endpoint: Verify profile data retrieval. Feature file: features/authentication.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:25Z","updated_at":"2026-02-17T23:21:16Z","closed_at":"2026-02-17T23:21:16Z","close_reason":"Already implemented via Rodauth OmniAuth userinfo endpoint","labels":["authentication","oidc"]}
{"id":"med-tracker-zuy","title":"[OIDC-006] OIDC sign-up with email claim: Verify automatic email population","description":"OIDC sign-up with email claim: Verify automatic email population. Feature file: features/authentication.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T16:32:32Z","updated_at":"2026-02-17T23:22:27Z","closed_at":"2026-02-17T23:22:27Z","close_reason":"Already implemented via Rodauth OmniAuth email claim handling","labels":["authentication","oidc"]}
