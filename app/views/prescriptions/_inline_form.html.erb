<%= turbo_frame_tag "new_prescription" do %>
  <div class="card">
	<%= form_with(model: [@person, @prescription], class: "prescription-form", data: { controller: "prescription-form" }) do |f| %>
	  <div class="prescription-form__grid">
		<div class="prescription-form__field">
		  <%= f.label :medicine_id, "Medicine", class: "form__label" %>
		  <%= f.collection_select :medicine_id, @medicines, :id, :name, { prompt: "Select a medicine" },
			  class: "form__input",
			  data: { action: "change->prescription-form#validate" } %>
		</div>

		<div class="prescription-form__field">
		  <%= f.label :dosage, class: "form__label" %>
		  <%= f.number_field :dosage, step: 0.5, min: 0, class: "form__input",
			  data: { action: "input->prescription-form#validate" } %>
		</div>

		<div class="prescription-form__field">
		  <%= f.label :frequency, class: "form__label" %>
		  <%= f.text_field :frequency, class: "form__input",
			  data: { action: "input->prescription-form#validate" } %>
		</div>

		<div class="prescription-form__field">
		  <%= f.label :start_date, class: "form__label" %>
		  <%= f.date_field :start_date, class: "form__input",
			  data: { action: "change->prescription-form#validate" } %>
		</div>

		<div class="prescription-form__field">
		  <%= f.label :end_date, class: "form__label" %>
		  <%= f.date_field :end_date, class: "form__input" %>
		</div>

		<div class="prescription-form__field prescription-form__field--full">
		  <%= f.label :notes, class: "form__label" %>
		  <%= f.text_area :notes, rows: 3, class: "form__input" %>
		</div>
	  </div>

	  <div class="prescription-form__actions">
		<%= f.submit "Add Prescription", class: "button button--primary", data: { "prescription-form-target": "submit" } %>
		<%= link_to "Cancel", "#", class: "button button--secondary",
			data: { action: "click->prescription-form#cancel" } %>
	  </div>
	<% end %>
  </div>
<% end %>
