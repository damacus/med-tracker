<%= form_with(model: medicine, class: "space-y-8", data: { testid: "medicine-form" }) do |form| %>
  <% if medicine.errors.any? %>
    <div class="rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700">
      <h2 class="font-semibold"><%= pluralize(medicine.errors.count, "error") %> prevented this medicine from being saved:</h2>
      <ul class="mt-2 list-disc space-y-1 pl-5">
        <% medicine.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="grid gap-6 sm:grid-cols-2">
    <div class="sm:col-span-2 space-y-2">
      <%= form.label :name, class: 'block text-sm font-medium text-slate-700' %>
      <%= form.text_field :name, required: true,
            class: 'w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400' %>
    </div>

    <div class="sm:col-span-2 space-y-2">
      <%= form.label :description, class: 'block text-sm font-medium text-slate-700' %>
      <%= form.text_area :description, rows: 3,
            class: 'w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400' %>
    </div>

    <div class="space-y-2">
      <%= form.label :dosage_amount, 'Standard dosage', class: 'block text-sm font-medium text-slate-700' %>
      <%= form.number_field :dosage_amount, step: :any, min: 0,
            class: 'w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400' %>
    </div>

    <div class="space-y-2">
      <%= form.label :dosage_unit, 'Unit', class: 'block text-sm font-medium text-slate-700' %>
      <%= form.select :dosage_unit,
            [['tablet', 'tablet'], ['mg', 'mg'], ['ml', 'ml'], ['g', 'g'], ['mcg', 'mcg'], ['IU', 'IU'], ['spray', 'spray'], ['drop', 'drop']],
            {},
            class: 'w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400' %>
    </div>

    <div class="space-y-2">
      <%= form.label :current_supply, class: 'block text-sm font-medium text-slate-700' %>
      <%= form.number_field :current_supply, min: 0,
            class: 'w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400' %>
    </div>

    <div class="space-y-2">
      <%= form.label :stock, class: 'block text-sm font-medium text-slate-700' %>
      <%= form.number_field :stock, min: 0,
            class: 'w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400' %>
    </div>

    <div class="sm:col-span-2 space-y-2">
      <%= form.label :warnings, class: 'block text-sm font-medium text-slate-700' %>
      <%= form.text_area :warnings, rows: 3,
            class: 'w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400' %>
    </div>
  </div>

  <div class="flex items-center justify-between">
    <%= link_to 'Back to medicines', medicines_path,
          class: 'inline-flex items-center rounded-md border border-slate-200 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50' %>
    <%= form.submit 'Save medicine',
          class: 'inline-flex items-center rounded-md bg-violet-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-violet-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400' %>
  </div>
<% end %>
