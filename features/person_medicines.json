[
	{
		"id": "PM-001",
		"category": "functional",
		"area": "person_medicines",
		"description": "Create person medicine (OTC/supplement)",
		"steps": [
			"Log in",
			"Navigate to person medicines",
			"Click Add Medicine",
			"Select medicine",
			"Add notes",
			"Submit",
			"Verify created"
		],
		"passes": true
	},
	{
		"id": "PM-002",
		"category": "functional",
		"area": "person_medicines",
		"description": "Create person medicine with timing restrictions",
		"steps": [
			"Log in",
			"Create person medicine",
			"Set max_daily_doses=3",
			"Set min_hours_between_doses=6",
			"Submit",
			"Verify restrictions saved"
		],
		"passes": true
	},
	{
		"id": "PM-003",
		"category": "functional",
		"area": "person_medicines",
		"description": "Record dose for person medicine",
		"steps": [
			"Log in",
			"Navigate to person medicine",
			"Click Take",
			"Verify MedicationTake created with person_medicine_id"
		],
		"passes": true
	},
	{
		"id": "PM-004",
		"category": "functional",
		"area": "person_medicines",
		"description": "Person medicine timing restrictions enforced",
		"steps": [
			"Create person medicine max_daily_doses=1",
			"Take one dose",
			"Attempt second dose",
			"Verify blocked"
		],
		"passes": true
	},
	{
		"id": "PM-005",
		"category": "functional",
		"area": "person_medicines",
		"description": "Person medicine can_take_now? method works",
		"steps": [
			"Create person medicine with restrictions",
			"Verify can_take_now? true initially",
			"Take dose",
			"Verify can_take_now? false"
		],
		"passes": true
	},
	{
		"id": "PM-006",
		"category": "functional",
		"area": "person_medicines",
		"description": "Person medicine next_available_time works",
		"steps": [
			"Create person medicine min_hours_between_doses=8",
			"Take dose at 10:00",
			"Call next_available_time",
			"Verify returns 18:00"
		],
		"passes": true
	},
	{
		"id": "PM-007",
		"category": "functional",
		"area": "person_medicines",
		"description": "Unique constraint on person_id and medicine_id",
		"steps": [
			"Create person medicine for person A with medicine X",
			"Attempt duplicate",
			"Verify validation error"
		],
		"passes": true
	},
	{
		"id": "PM-008",
		"category": "functional",
		"area": "person_medicines",
		"description": "Edit person medicine",
		"steps": [
			"Log in",
			"Navigate to person medicine",
			"Click Edit",
			"Modify notes",
			"Submit",
			"Verify saved"
		],
		"passes": true
	},
	{
		"id": "PM-009",
		"category": "functional",
		"area": "person_medicines",
		"description": "Delete person medicine",
		"steps": [
			"Log in",
			"Navigate to person medicine",
			"Click Delete",
			"Confirm",
			"Verify removed"
		],
		"passes": true
	},
	{
		"id": "PM-010",
		"category": "functional",
		"area": "person_medicines",
		"description": "List all person medicines for a person",
		"steps": [
			"Log in",
			"Navigate to person medicines page",
			"Verify all listed",
			"Verify medicine names shown"
		],
		"passes": true
	},
	{
		"id": "PM-011",
		"category": "functional",
		"area": "person_medicines",
		"description": "Complete OTC medicine management workflow",
		"steps": [
			"Log in as parent (jane.doe@example.com)",
			"Navigate to child's profile",
			"Click Person Medicines",
			"Click Add Medicine",
			"Select Vitamin D from dropdown",
			"Add notes: Daily supplement for bone health",
			"Set max_daily_doses: 1",
			"Leave min_hours_between_doses empty",
			"Submit form",
			"Verify success message",
			"Verify Vitamin D appears in list",
			"Click Take Medicine",
			"Verify dose recorded",
			"Verify button now disabled",
			"Verify message shows 1/1 doses taken today",
			"Navigate to medication history",
			"Verify dose appears with timestamp"
		],
		"passes": false
	},
	{
		"id": "PM-012",
		"category": "functional",
		"area": "person_medicines",
		"description": "Person medicine edit and delete workflow",
		"steps": [
			"Log in as administrator",
			"Navigate to person with existing person medicine",
			"Click Person Medicines",
			"Find existing medicine entry",
			"Click Edit",
			"Change notes to Updated notes",
			"Change max_daily_doses from 1 to 2",
			"Submit changes",
			"Verify success message",
			"Verify changes saved",
			"Navigate back to person medicines",
			"Find the medicine entry",
			"Click Delete",
			"Confirm deletion dialog",
			"Verify medicine removed from list",
			"Verify associated medication takes handled"
		],
		"passes": false
	}
]
