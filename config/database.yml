---
# Database configuration for MedTracker
# All environments use DATABASE_URL environment variable

development:
  adapter: postgresql
  url: <%= ENV['DATABASE_URL'] %>

test:
  <% if ENV['TEST_DATABASE_ADAPTER'] == 'postgresql' %>
  adapter: postgresql
  url: <%= ENV['DATABASE_URL'] %>
  <% else %>
  adapter: sqlite3
  database: db/test.sqlite3
  <% end %>

production:
  adapter: postgresql
  primary:
    url: <%= ENV['DATABASE_URL'] %>
  cache:
    url: <%= ENV['DATABASE_URL']&.gsub(/\/[^\/]+$/, '/medtracker_production_cache') %>
    migrations_paths: db/cache_migrate
  queue:
    url: <%= ENV['DATABASE_URL']&.gsub(/\/[^\/]+$/, '/medtracker_production_queue') %>
    migrations_paths: db/queue_migrate
  cable:
    url: <%= ENV['DATABASE_URL']&.gsub(/\/[^\/]+$/, '/medtracker_production_cable') %>
    migrations_paths: db/cable_migrate
